/* sohutv 2017-04-19 11:47:42 */
window.sohuHD||(window.sohuHD={}),sohuHD.cookie||(sohuHD.cookie=function(e,t,n){if("undefined"==typeof t){var i=new RegExp("(?:^|; )"+e+"=([^;]*)").exec(document.cookie);return i?i[1]||"":""}n=n||{},null===t&&(t="",n.expires=-1);var o="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var r;"number"==typeof n.expires?(r=new Date,r.setTime(r.getTime()+24*n.expires*60*60*1e3)):r=n.expires,o="; expires="+r.toUTCString()}var a=n.path?"; path="+n.path:"",c=n.domain?"; domain="+n.domain:"",s=n.secure?"; secure":"";document.cookie=[e,"=",t,o,a,c,s].join("")}),sohuHD.getJSONP||(sohuHD.getScript=function(e,t,n,i,o){var r=document.getElementsByTagName("head")[0]||document.documentElement,a=document.createElement("script");a.src=e,a.charset=n||sohuHD.docCharset,o=o||[];var c=!1;a.onload=a.onreadystatechange=function(){c||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(c=!0,t&&t.apply(this,o),a.onload=a.onreadystatechange=null,i&&(a.onerror=i),r&&a.parentNode&&r.removeChild(a))},r.insertBefore(a,r.firstChild)},sohuHD.getJSONP=function(e,t,n,i){var o="jsonp"+(new Date).getTime();e.indexOf("callback=?")>-1&&(e=e.replace("callback=?","callback="+o),window[o]=function(e){t(e);try{delete window[o]}catch(n){}},sohuHD.getScript(e+"&_="+(new Date).getTime(),null,n,i))}),function(e,t){if("undefined"==typeof e._hdpv){var n={},i="//pv.hd.sohu.com/pvpb.gif",o=1,r={pingback:function(e){var t=new Image,i="hdpv_"+o++;n[i]=t,t.onload=t.onerror=t.onabort=function(){n[i]=null},t.src=e},sendClickLog:function(e,t){e=e||"";var n=location.href,i=t&&t.getAttribute?t.getAttribute("href"):"",o=encodeURIComponent;this.pingback("//click.hd.sohu.com.cn/s.gif?type="+e+"&ref="+o(n)+"&des="+o(i))},utf8to16:function(e){var t,n,i,o,r,a,c,s,u;for(t=[],o=e.length,n=i=0;o>n;){switch(r=e.charCodeAt(n++),r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t[i++]=e.charAt(n-1);break;case 12:case 13:a=e.charCodeAt(n++),t[i++]=String.fromCharCode((31&r)<<6|63&a);break;case 14:a=e.charCodeAt(n++),c=e.charCodeAt(n++),t[i++]=String.fromCharCode((15&r)<<12|(63&a)<<6|63&c);break;case 15:switch(15&r){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a=e.charCodeAt(n++),c=e.charCodeAt(n++),s=e.charCodeAt(n++),u=(7&r)<<18|(63&a)<<12|(63&c)<<6|(63&s)-65536,u>=0&&1048575>=u?t[i]=String.fromCharCode(u>>>10&1023|55296,1023&u|56320):t[i]="?";break;case 8:case 9:case 10:case 11:n+=4,t[i]="?";break;case 12:case 13:n+=5,t[i]="?"}}i++}return t.join("")},b64_decodex:function(e){var t,n=new Array,i="";for(t=0;t<e.length;t+=4)i+=r.b64_423(e.substr(t,4));for(t=0;t<i.length;t+=8)n+=r.b2i(i.substr(t,8));return n},b64_423:function(e){for(var t=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","-","_"),n=new String,i=0;i<e.length;i++){for(var o=0;64>o;o++)if(e.charAt(i)==t[o]){var r=o.toString(2);n+=("000000"+r).substr(r.length);break}if(64==o)return 2==i?n.substr(0,8):n.substr(0,16)}return n},b2i:function(e){for(var t=0,n=128,i=0;8>i;i++,n/=2)"1"==e.charAt(i)&&(t+=n);return String.fromCharCode(t)}};r.passport=function(){var e=function(){var e,n,i,o=["ppinf","ppinfo","passport"];for(e=0,n=o.length;n>e;e++)if(i=new RegExp("\\b"+o[e]+"\\b=(.*?)(?:$|;)").exec(t.cookie),i&&i.length){i=i[1];break}return i},n=function(e){var t,n=r.utf8to16,i=r.b64_decodex;try{return e=unescape(e).split("|"),("1"==e[0]||"2"==e[0])&&(t=n(i(e[3]))),t}catch(o){}},i=function(e){e=e||"";var t,n,i,o={};try{for(e=e.split("|"),t=0,n=e.length;n>t;t++)i=e[t].split(":"),i.length>1&&(o[i[0]]=i[2])}catch(r){}return o},o=function(){return i(n(e()))};return{getAppid:function(){return o().appid||""},getPassport:function(){return o().userid||""},getUid:function(){return o().uid||""},getUUID:function(){return o().uuid||""},getQname:function(){return o().uniqname||""}}}();var a={ie:!-[1],swfurl:"//tv.sohu.com/upload/swf/playerGetUID131031.swf",timer:null,intervalID:null,container:null,pageLB:sohuHD.cookie("series_video"),guid:function(){return["TT",(+new Date+o++).toString(36),(1e18*Math.random()).toString(36)].join("").slice(0,16).toUpperCase()},getLandrefer:function(){var e=function(){var e=t.referrer;return e?(e=e.split("?")[0],e=e.split("#")[0],-1==e.indexOf("tv.sohu.com")):!1},n=sohuHD.cookie("landingrefer");return n||(e()?(sohuHD.cookie("landingrefer",encodeURIComponent(t.referrer),{path:"/",domain:"tv.sohu.com"}),n=t.referrer):n=""),n},createSWF:function(){this.container||(this.container=t.createElement("div"),t.body.firstChild?t.body.insertBefore(this.container,t.body.firstChild):t.body.appendChild(this.container),this.container.setAttribute("style","display:block;clear:both;float:none;position:absolute;right:0;bottom:0;border:none;"));var e=this.guid();this.container.innerHTML='<object name="'+e+'" id="'+e+(this.ie?'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" ':"")+'" data="'+this.swfurl+'" type="application/x-shockwave-flash"  width="1" height="1" style="position:absolute;right:0;bottom:0;border:none;" ><param name="movie" value="'+this.swfurl+'" /><param name="wmode" value="transparent" /><param name="version" value="10" /><param name="allowScriptAccess" value="always" /><param name="flashvars" /></object>',this.swf=t.getElementById(e)},run:function(){if(clearTimeout(this.timer),this.itmer=null,"undefined"==typeof this.flashVersion){this.flashVersion="";try{var n=e.navigator.plugins["Shockwave Flash"]||e.ActiveXObject;this.flashVersion=n.description||function(){return new n("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}()}catch(i){}this.flashVersion=(this.flashVersion.match(/\d+/g)||[0])[0]}var o=this;this.executed=!1,this.flashVersion<9?s(null,e.undefined):t.body?(o.createSWF(),o.timer=setTimeout(function(){s(null,e.undefined,"timeout=1")},1e4)):null==this.intervalID&&(this.intervalID=setInterval(function(){t.body&&(clearInterval(o.intervalID),null==o.intervalID,o.createSWF(),o.timer=setTimeout(function(){s(null,e.undefined,"timeout=1")},1e4))},100))}},c=0,s=function(n,o,s){if(0==c&&a.swf&&"function"!=typeof a.swf.getData){c+=1;var u=Array.prototype.slice.call(arguments),h=arguments.callee;return setTimeout(function(){h.apply(e,u)},50),!1}if(c=0,a.timer&&(clearTimeout(a.timer),a.timer=null),!a.executed){a.executed=!0;var d=function(){var e=0;return e=a.lb?a.lb:a.pageLB?a.pageLB:0,a.lb=null,delete a.lb,e}(),l="undefined"==typeof _tv_hdpv_options?{}:_tv_hdpv_options,f="undefined"!=typeof top&&top.location==self.location?"t":"f",p=t.cookie.indexOf("ppinf=")<0&&t.cookie.indexOf("ppinfo=")<0&&t.cookie.indexOf("passport=")<0?"f":"t",m=r.passport.getPassport(),g=a.swf,v=function(){var e="",t=sohuHD.cookie("SUV"),n="";try{n=g?g.getData("SUV"):""}catch(i){}if(n)sohuHD.cookie("SUV",n,{path:"/",domain:".sohu.com",expires:100}),e=n;else if(t){try{g&&g.setData("SUV",t)}catch(o){}e=t}return e}();n=function(){var e="",t=sohuHD.cookie("fuid"),n="";try{n=g?g.getData("id"):""}catch(i){}if(t){try{g&&g.setData("id",t)}catch(o){}e=t}else n&&(sohuHD.cookie("fuid",n,{path:"/",domain:"tv.sohu.com",expires:100}),e=n);return e}(),n||(n=null!==v?v:"");var b=e.vid||"",y=encodeURIComponent(t.referrer),w=encodeURIComponent(e.location.href);1==d&&a.lbInfo&&(b=a.lbInfo.vid,a.lbInfo.url&&(w=encodeURIComponent(a.lbInfo.url)),a.lbInfo.preUrl&&(y=encodeURIComponent(a.lbInfo.preUrl)),a.lbInfo=null,delete a.lbInfo);var k=function(){var t="";return e.cateCode?t=e.cateCode:e._videoInfo&&e._videoInfo.cateCode&&(t=e._videoInfo.cateCode),t}(),x=sohuHD.cookie("YYID"),_=sohuHD.cookie("showqd"),D="";try{"f"==f&&(D=e.top.location.href)}catch(C){}var I="",S=t.documentElement.clientWidth;try{I="url="+w+"&refer="+y+"&fuid="+n+"&yyid="+(x||"")+"&showqd="+(_||"")+"&vid="+b+"&nid="+("undefined"!=typeof nid&&""!==nid?nid:"")+"&pid="+("undefined"!=typeof pid&&""!==pid?pid:"")+"&cid="+(e.cid||"")+"&suv="+(null!==v?v:"")+(l.is404?"&is404=t":"")+(l.urlExt?"&"+l.urlExt:"")+"&istoploc="+f+"&topurl="+D+"&lb="+d+"&oth="+sohuHD.cookie("_LQD")+"&cd="+sohuHD.cookie("_LCODE")+"&lf="+encodeURIComponent(a.getLandrefer())+"&passport="+m+"&_="+(new Date).getTime()+"&islogin="+p+"&catename="+("undefined"!=typeof filmType&&""!==filmType?filmType:"")+"&catecode="+k+"&ugu="+(e.ugu||"")+"&ugcode="+(e.ugcode||"")+"&pagewidth="+S+("undefined"!=typeof cateId?"&cateid="+cateId:"")+"&playlistid="+(e.vrs_playlist_id||e._playListId||e.playlistId||e.PLAYLIST_ID||"")+("undefined"!=typeof _uid?"&buid="+_uid:"")+(o?"&"+o:"")+(s?"&"+s:"")}catch(T){}r.pingback(i+"?"+I)}};sohuHD.cookie("series_video",null,{path:"/"});var u=t.referrer,h="//click.hd.sohu.com.cn/s.gif?";-1!=u.search("so.tv.sohu.com/mts?")&&(r.pingback(h+"type=search_kpi_0&ref="+escape(u)),setTimeout(function(){r.pingback(h+"type=search_kpi_1&ref="+escape(u))},1e4),setTimeout(function(){r.pingback(h+"type=search_kpi_2&ref="+escape(u))},6e4)),a.run(),e.messagebus&&messagebus.subscribe("play.nextVideoPlayed",function(e,t){a.lb=1,a.lbInfo=t,a.run()},null,null,{cache:!0}),r.pv=a,e.gotPlayerUID=s,e._hdpv=r}}(window,document),function(){var e={cookie:function(e,t,n){if("undefined"==typeof t){var i=new RegExp("(?:^|; )"+e+"=([^;]*)").exec(document.cookie);return i?i[1]||"":""}n=n||{},null===t&&(t="",n.expires=-1);var o="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var r;"number"==typeof n.expires?(r=new Date,r.setTime(r.getTime()+3600*n.expires*1e3)):r=n.expires,o="; expires="+r.toUTCString()}var a=n.path?"; path="+n.path:"",c=n.domain?"; domain="+n.domain:"",s=n.secure?"; secure":"";document.cookie=[e,"=",t,o,a,c,s].join("")},init:function(){this.check();var e=this.cookie("beans_freq");e||this.connect()},connect:function(){var e=this.cookie("SUV"),t=this.cookie("TUV"),n=this.cookie("FUID"),i=document.domain,o=encodeURIComponent(e+"|"+t+"|"+n+"|"+i);this.cookie("beans_freq","1",{expires:.5,path:"/",domain:"sohu.com"}),sohuHD.getJSONP("//hui.sohu.com/mum/ipqueryjp?callback=?",function(e){for(var t=e.urls||[],n=0;n<t.length;n++){var i=t[n]+(-1===t[n].indexOf("?")?"?":"&")+"cookie="+o;window._hdpv.pingback(i)}})},check:function(){var e=Math.ceil(100*Math.random());if(1===e){var t=new Image;t.src="//hui.sohu.com/mum/jsurl?_="+(new Date).getTime()}}};e.init()}(),function(){var e=sohuHD.cookie,t=function(e){var t=[];if("object"==typeof e)for(var n in e)t.push(n+"="+e[n]);return t.join("&")},n={query:function(e,t){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");t=t?t.substr(t.indexOf("?")+1):window.location.search.substr(1);var i=t.match(n);return null!=i?unescape(i[2]):null}},i={url:"//t.go.sohu.com/ask_cm.gif",init:function(){var i=this,o=e("SUV"),r=e("beans_dmp"),a=n.query("ref"),c={callback:"?"},s=e("beans_dmp_done"),u=new Date;tomorrow=new Date(u.getFullYear(),u.getMonth(),u.getDate()+1),s||(e("beans_dmp_done","1",{expires:tomorrow,domain:"sohu.com",path:"/"}),this.idstr=o,this.exp=r?JSON.parse(decodeURIComponent(r)):{},this.idstr&&(a&&(c.ref=a),sohuHD.getJSONP(i.url+"?"+t(c),function(e,t){e&&e.data&&e.data.length&&i.resolve(e.data)})))},resolve:function(t){for(var n=Math.ceil((new Date).getTime()/1e3),i=this.exp,o=0,r=t.length;r>o;o++){var a=t[o].MID,c=t[o].MURL;this.report(c),this.exp[a]=n}e("beans_dmp",encodeURIComponent(JSON.stringify(i)),{domain:"sohu.com",path:"/",expires:30})},report:function(e){e=e.replace(/{{idstr}}/g,this.idstr);var t=new Image(1,1);t.onload=t.onerror=function(){t=null},t.src=e+"&_="+(new Date).getTime()}};sohuHD.CookieMapping=i,sohuHD.CookieMapping.init()}(),function(e){function t(t){function n(e,t){try{console[e](t)}catch(n){}}function i(e){return e&&e.length>10?e:c[e]||e}function o(e,n){return e&&t.isPlainObject(n)?(e=e.replace(/\{(\w+)(?:-(\w+))?\}/g,function(e,i,o){var r=n[i];return t.isFunction(r)&&(r=r(o)),encodeURIComponent(r||"")}),e+n.urlExt):""}function r(n,r){n=i(n),n=o(n,t.extend({},a,r)),n&&n.length>0&&e._hdpv.pingback(n)}var a={cookie:function(e){return sohuHD.cookie(e)},uuid:function(){return sohuHD.cookie("fuid")},fuid:function(){return sohuHD.cookie("fuid")},yyid:function(){return sohuHD.cookie("YYID")},sid:function(){return sohuHD.cookie("SUV")},url:function(){return location.href},refer:function(){return document.referrer},random:function(){return 1e13*Math.random()},resolution:function(){return[e.screen.width,e.screen.height].join("*")},pixelsUser:function(){return[document.body.clientWidth,document.body.clientHeight].join("*")},pixelsReal:function(){var e,t,n=(document.body.className||"").match(/W[-_](\d+)/);return e=n&&n.length>0?n[1]:document.body.clientWidth,t=document.body.clientHeight,[e,t].join("*")},vid:function(){return e.vid},cid:function(){return e.cid},playlistid:function(){return e.playlistId},catecode:function(){return e.cateCode},urlExt:e._tv_pinger_urlExt?"&"+e._tv_pinger_urlExt:""},c={mc:"//pv.hd.sohu.com/mc.gif?type={type}&txid={txid}&url={url}&refer={refer}&sid={sid}&fuid={fuid}&playlistid={playlistid}&vid={vid}&catecode={catecode}&cid={cid}&other={other}&ver=v20141016&_={random}",normal:"//pv.hd.sohu.com/mc.gif?type={type}&txid={txid}&url={url}&refer={refer}&sid={sid}&fuid={fuid}&ver=v20141016&_={random}",hot:"//pv.hd.sohu.com/mvv.gif?type=hot&txid={txid}&url={url}&refer={refer}&x={x}&y={y}&pixels_screen={resolution}&pixels_user={pixelsUser}&pixels_real={pixelsReal}&button={button}&linkname={linkName}&plinkname={plinkName}"},s={$$:t,pinger:r,logger:n,ping:function(e){},watch:function(){},init:function(){var e=this;e.$$(function(){e.watch()}),e.init=function(){}}},u=0,h={};return{_ins:h,ping:r,createWatch:function(e){var n=t.extend({},s,e);return n.init(),n.name||(n.name="ins"+ ++u),h[n.name]=n,n}}}if(e.kao&&e.__tv_dict){var n={name:"impress",config:{flag:"pb-impress"},_watchs:[],addWatchElem:function(e){e.length>0&&(this._watchs=this._watchs.concat(e))},checkWatchElem:function(e,t){var n=e.getBoundingClientRect(),i={width:n.width||n.right-n.left,height:n.height||n.bottom-n.top,left:n.left,right:n.right,top:n.top,bottom:n.bottom},o=1/3,r={width:i.width*(1-o),height:i.height*(1-o)},a=i.left+r.width>0&&i.left-r.width<t.width-i.width,c=i.top+r.height>0&&i.top-r.height<t.height-i.height;return a&&c},detect:function(){var e=this.$$,t=e("["+this.config.flag+"]").not(function(){var t=e(this),n=t.data("pb-impress-count")||0;return n+=1,t.data("pb-impress-count",n),n>1}).toArray();return t},digest:function(e){var t=[],n=[];if(this._watchs.length<=0)return[];for(var i,o=0;i=this._watchs[o];o++)this.checkWatchElem(i,e)?t.push(i):n.push(i);return this._watchs=n,t},handler:function(e){var t=this,n=this.$$,i=this.digest(e);0!==i.length&&n.each(i,function(e,n){t.ping(n)})},ping:function(e){var t=this,n=this.$$,i=n(e),o=i.attr("pb-impress")||"mc",r={type:"impress",txid:function(){return i.data("pb-txid")},other:function(){var e=i.data("pb-other");return"object"==typeof e?JSON.stringify(e):e}};t.pinger(o,r)},watch:function(){var t,n,i,o=this,r=this.$$;i=function(){var e=o.detect();e.length>0&&(o.addWatchElem(e),o.logger("info","watch:detect "+e.length+" element")),o.handler({scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.width(),height:n.height()})},n=r(e).bind("scroll resize",function(){t&&e.clearTimeout(t),t=e.setTimeout(i,1e3)}),o.logger("info","watch:impress"),i()}},i={name:"click",ping:function(e,t){var n=this,i=this.$$,o=i(e),r=i(t),a=o.attr("pb-click")||o.attr("pb-click-a")||"mc",c={type:"click",txid:function(){return r.data("pb-txid")||o.data("pb-txid")},other:function(){var e=r.data("pb-other")||o.data("pb-other");return"object"==typeof e?JSON.stringify(e):e}};n.pinger(a,c)},watch:function(){var e=this,t=this.$$;t("body").delegate("[pb-click]","click",function(n){var i=t(n.target);e.ping(this,i)}).delegate("[pb-click-a]","click",function(n){var i=t(n.target);if(i.is("a"))e.ping(this,i);else{var o=i.closest("a");o.length&&e.ping(this,o)}}),this.logger("info","watch:click")}},o={name:"hover",ping:function(e){var t=this,n=this.$$,i=n(e),o=i.attr("pb-hover")||"mc",r={type:"hover",txid:function(){return i.data("pb-txid")},other:function(){var e=i.data("pb-other");return"object"==typeof e?JSON.stringify(e):e}};t.pinger(o,r)},watch:function(){var t=this,n=this.$$;n("body").delegate("[pb-hover]","hover",function(){var i=n(this),o=i.data("_tid");o?(e.clearTimeout(o),o=0,i.data("_tid",o)):(o=e.setTimeout(function(){t.ping(i)},1e3),i.data("_tid",o))}),this.logger("info","watch:hover")}},r={name:"pv",ping:function(e){var t="normal",n={type:"pv",txid:e[1]};this.pinger(t,n)},hasPvtxid:function(){var e=(document.location.href||"").match(/pvtxid=([^&]+)/i);return e&&e[1]?e:!1},watch:function(){var e=this.hasPvtxid();e&&this.ping(e)}},a={name:"mbus",ping:function(e){var t=e.url||"mc",n={type:e.type||"impress",txid:e.txid,other:e.other||""};this.pinger(t,n)},watch:function(){var e=this;messagebus.subscribe("statV2.ping",function(t,n){e.ping(n)},null,null,{cache:!0})}};kao("jquery",function(){var c=sohuHD.statV2=t(e.jQuery);c.createWatch(n),c.createWatch(i),c.createWatch(o),c.createWatch(r),c.createWatch(a)})}}(window);