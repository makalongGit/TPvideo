var Mustache;!function(e){"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define?define(e):Mustache=e}(function(){function e(e,t){return RegExp.prototype.test.call(e,t)}function t(t){return!e(f,t)}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e){return String(e).replace(/[&<>"'\/]/g,function(e){return b[e]})}function a(e){this.string=e,this.tail=e,this.pos=0}function o(e,t){this.view=e,this.parent=t,this.clearCache()}function r(){this.clearCache()}function s(e){for(var t,n=e[3],i=n;(t=e[4])&&t.length;)e=t[t.length-1],i=e[3];return[n,i]}function l(e){function t(e,t,i){if(!n[e]){var a=l(t);n[e]=function(e,t){return a(e,t,i)}}return n[e]}var n={};return function(n,i,a){for(var o,r,l="",c=0,d=e.length;d>c;++c)switch(o=e[c],o[0]){case"#":r=a.slice.apply(a,s(o)),l+=n._section(o[1],i,r,t(c,o[4],a));break;case"^":l+=n._inverted(o[1],i,t(c,o[4],a));break;case">":l+=n._partial(o[1],i);break;case"&":l+=n._name(o[1],i);break;case"name":l+=n._escaped(o[1],i);break;case"text":l+=o[1]}return l}}function c(e){for(var t,n,i=[],a=i,o=[],r=0;r<e.length;++r)switch(t=e[r],t[0]){case"#":case"^":t[4]=[],o.push(t),a.push(t),a=t[4];break;case"/":if(0===o.length)throw new Error("Unopened section: "+t[1]);if(n=o.pop(),n[1]!==t[1])throw new Error("Unclosed section: "+n[1]);a=o.length>0?o[o.length-1][4]:i;break;default:a.push(t)}if(n=o.pop())throw new Error("Unclosed section: "+n[1]);return i}function d(e){for(var t,n,i=0;i<e.length;++i)t=e[i],n&&"text"===n[0]&&"text"===t[0]?(n[1]+=t[1],n[3]=t[3],e.splice(i--,1)):n=t}function u(e){if(2!==e.length)throw new Error("Invalid tags: "+e.join(" "));return[new RegExp(n(e[0])+"\\s*"),new RegExp("\\s*"+n(e[1]))]}var h={};h.name="mustache.js",h.version="0.7.0",h.tags=["{{","}}"],h.Scanner=a,h.Context=o,h.Writer=r;var p=/\s*/,g=/\s+/,f=/\S/,m=/\s*=/,v=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!/,w=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};h.escape=i,a.prototype.eos=function(){return""===this.tail},a.prototype.scan=function(e){var t=this.tail.match(e);return t&&0===t.index?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},a.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n),this.pos+=n}return t},o.make=function(e){return e instanceof o?e:new o(e)},o.prototype.clearCache=function(){this._cache={}},o.prototype.push=function(e){return new o(e,this)},o.prototype.lookup=function(e){var t=this._cache[e];if(!t){if("."===e)t=this.view;else for(var n=this;n;){if(e.indexOf(".")>0){var i=e.split("."),a=0;for(t=n.view;t&&a<i.length;)t=t[i[a++]]}else t=n.view[e];if(null!=t)break;n=n.parent}this._cache[e]=t}return"function"==typeof t&&(t=t.call(this.view)),t},r.prototype.clearCache=function(){this._cache={},this._partialCache={}},r.prototype.compile=function(e,t){var n=this._cache[e];if(!n){var i=h.parse(e,t);n=this._cache[e]=this.compileTokens(i,e)}return n},r.prototype.compilePartial=function(e,t,n){var i=this.compile(t,n);return this._partialCache[e]=i,i},r.prototype.compileTokens=function(e,t){var n=l(e),i=this;return function(e,a){if(a)if("function"==typeof a)i._loadPartial=a;else for(var r in a)i.compilePartial(r,a[r]);return n(i,o.make(e),t)}},r.prototype.render=function(e,t,n){return this.compile(e)(t,n)},r.prototype._section=function(e,t,n,i){var a=t.lookup(e);switch(typeof a){case"object":if(w(a)){for(var o="",r=0,s=a.length;s>r;++r)o+=i(this,t.push(a[r]));return o}return a?i(this,t.push(a)):"";case"function":var l=this,c=function(e){return l.render(e,t)};return a.call(t.view,n,c)||"";default:if(a)return i(this,t)}return""},r.prototype._inverted=function(e,t,n){var i=t.lookup(e);return!i||w(i)&&0===i.length?n(this,t):""},r.prototype._partial=function(e,t){e in this._partialCache||!this._loadPartial||this.compilePartial(e,this._loadPartial(e));var n=this._partialCache[e];return n?n(t):""},r.prototype._name=function(e,t){var n=t.lookup(e);return"function"==typeof n&&(n=n.call(t.view)),null==n?"":String(n)},r.prototype._escaped=function(e,t){return h.escape(this._name(e,t))},h.parse=function(e,i){function o(){if(k&&!I)for(;x.length;)S.splice(x.pop(),1);else x=[];k=!1,I=!1}i=i||h.tags;for(var r,s,l,f,w=u(i),b=new a(e),S=[],x=[],k=!1,I=!1;!b.eos();){if(r=b.pos,l=b.scanUntil(w[0]))for(var C=0,T=l.length;T>C;++C)f=l.charAt(C),t(f)?x.push(S.length):I=!0,S.push(["text",f,r,r+1]),r+=1,"\n"===f&&o();if(r=b.pos,!b.scan(w[0]))break;if(k=!0,s=b.scan(y)||"name",b.scan(p),"="===s)l=b.scanUntil(m),b.scan(m),b.scanUntil(w[1]);else if("{"===s){var E=new RegExp("\\s*"+n("}"+i[1]));l=b.scanUntil(E),b.scan(v),b.scanUntil(w[1]),s="&"}else l=b.scanUntil(w[1]);if(!b.scan(w[1]))throw new Error("Unclosed tag at "+b.pos);S.push([s,l,r,b.pos]),("name"===s||"{"===s||"&"===s)&&(I=!0),"="===s&&(i=l.split(g),w=u(i))}return d(S),c(S)};var S=new r;return h.clearCache=function(){return S.clearCache()},h.compile=function(e,t){return S.compile(e,t)},h.compilePartial=function(e,t,n){return S.compilePartial(e,t,n)},h.compileTokens=function(e,t){return S.compileTokens(e,t)},h.render=function(e,t,n){return S.render(e,t,n)},h.to_html=function(e,t,n,i){var a=h.render(e,t,n);return"function"!=typeof i?a:void i(a)},h}()),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";function t(n,i){var a=function(){},o=this,r={offset:{top:0,left:0},autoSelectFirst:!1,appendTo:"body",serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:t.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onEnter:a,onSearchStart:a,onSearchComplete:a,onSearchError:a,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(e,t,n){return-1!==e.value.toLowerCase().indexOf(n)},paramName:"query",transformResult:function(t){return"string"==typeof t?e.parseJSON(t):t}};o.element=n,o.el=e(n),o.suggestions=[],o.history=[],o.badQueries=[],o.selectedIndex=-1,o.currentValue=o.element.value,o.intervalId=0,o.cachedResponse={},o.onChangeInterval=null,o.onChange=null,o.isLocal=!1,o.suggestionsContainer=null,o.options=e.extend({},r,i),o.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},o.hint=null,o.hintValue="",o.selection=null,o.initialize(),o.setOptions(i)}var n=function(){return{escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(e){var t=document.createElement("div");return t.className=e,t.style.display="none",t},cookie:function(e,t,n,i,a){if(void 0==t){var o=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),r=document.cookie.match(o);return r?r[1]:""}var s=new Date;s.setDate(s.getDate()+n),document.cookie=e+"="+escape(t)+(null==n?"":";expires="+s.toGMTString())+(null==i?"":";path="+i)+(null==a?"":";domain="+a)}}}(),i={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40};t.utils=n,e.Autocomplete=t,t.formatResult=function(e,t){var i="("+n.escapeRegExChars(t)+")";return e.value.replace(new RegExp(i,"gi"),"<strong>$1</strong>")},t.prototype={killerFn:null,initialize:function(){var t,n=this,i="."+n.classes.suggestion,a=n.classes.selected,o=n.options,r="";n.element.setAttribute("autocomplete","off"),n.killerFn=function(t){0===e(t.target).closest(n.options.containerClass).length&&(n.killSuggestions(),n.disableKillerFn())},r='<div class="c-header-search-list">                <h4 class="c-header-search-list-title c-header-search-list-history-title">搜索历史</h4>                <a class="c-header-search-list-empty" href="javascript:;"><i></i>清空记录</a>                <div class="c-header-search-list-history"></div>                <h4 class="c-header-search-list-title c-header-search-list-hot-title">热门搜索</h4>                <div class="c-header-search-list-hot"></div>            </div>',t=n.container=e(o.containerClass),t.append(e(r)),n.$historyList=t.find(o.historyList),n.$suggestList=t.find(o.suggestList),n.wrapper=e(o.wrapperClass),t.on("mouseover.autocomplete",i,function(){n.activate(e(this).data("index"))}),t.on("mouseout.autocomplete",function(){n.selectedIndex=-1,t.children("."+a).removeClass(a)}),t.on("click.autocomplete",i,function(){n.select(e(this).data("index")),n.options.onEnter()}),t.on("click.autocomplete",o.emptyHistory,function(){n.clearHisotry(),n.showHideHistory()}),e(document).on("before.search",function(e,t){n.addHistory(t.word)}),n.el.on("keydown.autocomplete",function(e){n.onKeyPress(e)}),n.el.on("keyup.autocomplete",function(e){n.onKeyUp(e)}),n.el.on("blur.autocomplete",function(){n.onBlur()}),n.el.on("focus.autocomplete",function(){n.onFocus()}),n.el.on("change.autocomplete",function(e){n.onKeyUp(e)})},onFocus:function(){var e=this;e.options.minChars<=e.el.val().length&&e.onValueChange()},onBlur:function(){this.enableKillerFn()},setOptions:function(t){var n=this,i=n.options;e.extend(i,t),n.isLocal=e.isArray(i.lookup),n.isLocal&&(i.lookup=n.verifySuggestionsFormat(i.lookup))},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){var e=this;e.disabled=!0,e.currentRequest&&e.currentRequest.abort()},enable:function(){this.disabled=!1},enableKillerFn:function(){var t=this;e(document).on("click.autocomplete",t.killerFn)},disableKillerFn:function(){var t=this;e(document).off("click.autocomplete",t.killerFn)},killSuggestions:function(){var e=this;e.stopKillSuggestions(),e.intervalId=window.setInterval(function(){e.hide(),e.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var e,t=this,n=t.el.val().length,i=t.element.selectionStart;return"number"==typeof i?i===n:document.selection?(e=document.selection.createRange(),e.moveStart("character",-n),n===e.text.length):!0},onKeyPress:function(e){var t=this;if(!t.disabled&&!t.visible&&e.which===i.DOWN&&t.currentValue)return void t.suggest();if(t.disabled||!t.visible)return void(e.which==i.RETURN&&t.options.onEnter());switch(e.which){case i.ESC:t.el.val(t.currentValue),t.hide();break;case i.RIGHT:if(t.hint&&t.options.onHint&&t.isCursorAtEnd()){t.selectHint();break}return;case i.TAB:if(t.hint&&t.options.onHint)return void t.selectHint();case i.RETURN:if(-1===t.selectedIndex)return t.hide(),void t.options.onEnter();if(t.select(t.selectedIndex),t.options.onEnter(),e.which===i.TAB&&t.options.tabDisabled===!1)return;break;case i.UP:t.moveUp();break;case i.DOWN:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()},onKeyUp:function(e){var t=this;if(!t.disabled){switch(e.which){case i.UP:case i.DOWN:return}clearInterval(t.onChangeInterval),t.currentValue!==t.el.val()&&(t.findBestHint(),t.options.deferRequestBy>0?t.onChangeInterval=setInterval(function(){t.onValueChange()},t.options.deferRequestBy):t.onValueChange())}},onValueChange:function(){var t,n=this,i=n.options,a=n.el.val(),o=n.getQuery(a);return n.selection&&(n.selection=null,(i.onInvalidateSelection||e.noop).call(n.element)),clearInterval(n.onChangeInterval),n.currentValue=a,n.selectedIndex=-1,i.triggerSelectOnValidInput&&(t=n.findSuggestionIndex(o),-1!==t)?void n.select(t):(n.showHideHistory(),void(o.length<i.minChars?n.hide():n.getSuggestions(o)))},findSuggestionIndex:function(t){var n=this,i=-1,a=t.toLowerCase();return e.each(n.suggestions,function(e,t){return t.value.toLowerCase()===a?(i=e,!1):void 0}),i},getQuery:function(t){var n,i=this.options.delimiter;return i?(n=t.split(i),e.trim(n[n.length-1])):t},getSuggestionsLocal:function(t){var n,i=this,a=i.options,o=t.toLowerCase(),r=a.lookupFilter,s=parseInt(a.lookupLimit,10);return n={suggestions:e.grep(a.lookup,function(e){return r(e,t,o)})},s&&n.suggestions.length>s&&(n.suggestions=n.suggestions.slice(0,s)),n},getSuggestions:function(t){var n,i,a,o=this,r=o.options,s=r.serviceUrl;if(r.params[r.paramName]=t,i=r.ignoreParams?null:r.params,o.isLocal?n=o.getSuggestionsLocal(t):(e.isFunction(s)&&(s=s.call(o.element,t)),a=s+"?"+e.param(i||{}),n=o.cachedResponse[a]),n&&e.isArray(n.suggestions))o.suggestions=n.suggestions,o.suggest();else if(!o.isBadQuery(t)){if(r.onSearchStart.call(o.element,r.params)===!1)return;o.currentRequest&&o.currentRequest.abort(),o.currentRequest=e.ajax({url:s,data:i,type:r.type,dataType:r.dataType}).done(function(e){var n;o.currentRequest=null,n=r.transformResult(e),o.processResponse(n,t,a),r.onSearchComplete.call(o.element,t,n.suggestions)}).fail(function(e,n,i){r.onSearchError.call(o.element,t,e,n,i)})}},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,n=t.length;n--;)if(0===e.indexOf(t[n]))return!0;return!1},hide:function(){var e=this;e.visible=!1,e.selectedIndex=-1,e.wrapper.hide(),e.signalHint(null)},getHistory:function(){var e,n=this.options;return e=t.utils.cookie(n.cookieName)||"",e=unescape(e),e=e.replace(/\s/g,""),e=e?e.split(","):[]},clearHisotry:function(){var e=this.options;t.utils.cookie(e.cookieName,"",99999,"/","mgtv.com"),this.history=[]},addHistory:function(e){var n,i,a=[],o=this.options;if(e&&e.replace(/\s/g,"")){for(e=e||"",e=e.slice(0,10),i=this.getHistory(),n=0;n<i.length;n++)i[n]!=e&&a.push(i[n]);a.length>=6&&(a=a.slice(0,5)),a.unshift(e),t.utils.cookie(o.cookieName,a.join(","),99999,"/","mgtv.com")}},showHideHistory:function(){var e=this,t=e.options,n=e.getQuery(e.currentValue);0==e.history.length||n?(e.showHistory=!1,e.container.find(t.whenNoHistory).hide()):(e.showHistory=!0,e.container.find(t.whenNoHistory).show())},suggest:function(){var t,n=this,i=n.options,a=i.formatResult,o=n.getQuery(n.currentValue),r=n.classes.suggestion,s=n.classes.selected,l=n.container,c=i.beforeRender,d="",u="";return n.history=n.getHistory(),0===n.suggestions.length?void n.hide():(n.showHideHistory(),i.triggerSelectOnValidInput&&(t=n.findSuggestionIndex(o),-1!==t)?void n.select(t):(e.each(n.history,function(e,t){u+='<div class="'+r+'" data-index="'+e+'" data-value="'+t+'"><p>'+t+"</p></div>"}),e.each(n.suggestions,function(e,t){d+='<div class="'+r+'" data-index="'+(e+n.history.length)+'" data-value="'+t.value+'"><p>'+(""==o?'<i class="'+(3>e?"istop":"")+'">'+(e+1)+"</i>":"")+a(t,o)+(t.recently?"<span>最近搜过</span>":"")+"</p></div>"}),n.$historyList.html(u),n.$suggestList.html(d),i.autoSelectFirst&&(n.selectedIndex=0,n.$suggestList.children().first().addClass(s)),e.isFunction(c)&&c.call(n.element,l),n.wrapper.show(),n.visible=!0,void n.findBestHint()))},findBestHint:function(){var t=this,n=t.el.val().toLowerCase(),i=null;n&&(e.each(t.suggestions,function(e,t){var a=0===t.value.toLowerCase().indexOf(n);return a&&(i=t),!a}),t.signalHint(i))},signalHint:function(t){var n="",i=this;t&&(n=i.currentValue+t.value.substr(i.currentValue.length)),i.hintValue!==n&&(i.hintValue=n,i.hint=t,(this.options.onHint||e.noop)(n))},verifySuggestionsFormat:function(t){return t.length&&"string"==typeof t[0]?e.map(t,function(e){return{value:e,data:null}}):t},processResponse:function(e,t,n){var i=this,a=i.options;e.suggestions=i.verifySuggestionsFormat(e.suggestions),a.noCache||(i.cachedResponse[n]=e,a.preventBadQueries&&0===e.suggestions.length&&i.badQueries.push(t)),t===i.getQuery(i.currentValue)&&(i.suggestions=e.suggestions,i.suggest())},activate:function(t){var n,i=this,a=i.classes.selected,o="."+i.classes.suggestion,r=i.container.find(o);return r.removeClass(a),i.selectedIndex=t,-1!==i.selectedIndex&&r.length>i.selectedIndex?(n=r.get(i.selectedIndex),e(n).addClass(a),n):null},selectHint:function(){var t=this,n=e.inArray(t.hint,t.suggestions);t.select(n)},select:function(e){var t=this;t.hide(),t.onSelect(e)},moveUp:function(){var e=this,t="."+e.classes.suggestion,n=e.container.find(t);if(-1!==e.selectedIndex)return e.selectedIndex===e.history.length&&!e.showHistory||0===e.selectedIndex&&e.showHistory?(n.removeClass(e.classes.selected),e.selectedIndex=-1,e.el.val(e.currentValue),void e.findBestHint()):void e.adjustScroll(e.selectedIndex-1)},moveDown:function(){var e=this,t="."+e.classes.suggestion,n=e.container.find(t);-1===e.selectedIndex&&e.history.length>0&&!e.showHistory&&(e.selectedIndex=e.history.length-1);var i=e.showHistory?Math.ceil(e.history.length/2):0;e.selectedIndex!==n.length-1-i&&e.adjustScroll(e.selectedIndex+1)},adjustScroll:function(t){var n=this,i=n.activate(t);i&&(n.el.val(e(i).data("value")),n.signalHint(null))},onSelect:function(t){var n,i=this,a=i.options.onSelect,o=i.history.length;n=t>=o?{value:i.suggestions[t-o].value,data:t-o}:{value:i.history[t],data:t,isHistory:!0},i.currentValue=i.getValue(n.value),i.el.val(i.currentValue),i.signalHint(null),i.suggestions=[],i.selection=n,e.isFunction(a)&&a.call(i.element,n)},getValue:function(e){var t,n,i=this,a=i.options.delimiter;return a?(t=i.currentValue,n=t.split(a),1===n.length?e:t.substr(0,t.length-n[n.length-1].length)+e):e},dispose:function(){var t=this;t.el.off(".autocomplete").removeData("autocomplete"),t.disableKillerFn(),e(t.suggestionsContainer).remove()}},e.fn.autocomplete=function(n,i){var a=[],o="autocomplete";return 0===arguments.length?this.first().data(o):(this.each(function(){var r=e(this),s=r.data(o);"string"==typeof n?s&&"function"==typeof s[n]&&s[n](i):(s&&s.dispose&&s.dispose(),s=new t(this,n),a.push(s),r.data(o,s))}),a)}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){function t(e){return s.raw?e:encodeURIComponent(e)}function n(e){return s.raw?e:decodeURIComponent(e)}function i(e){return t(s.json?JSON.stringify(e):String(e))}function a(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(r," ")),s.json?JSON.parse(e):e}catch(t){}}function o(t,n){var i=s.raw?t:a(t);return e.isFunction(n)?n(i):i}var r=/\+/g,s=e.jcookie=function(a,r,l){if(arguments.length>1&&!e.isFunction(r)){if(l=e.extend({},s.defaults,l),"number"==typeof l.expires){var c=l.expires,d=l.expires=new Date;d.setMilliseconds(d.getMilliseconds()+864e5*c)}return document.cookie=[t(a),"=",i(r),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var u=a?void 0:{},h=document.cookie?document.cookie.split("; "):[],p=0,g=h.length;g>p;p++){var f=h[p].split("="),m=n(f.shift()),v=f.join("=");if(a===m){u=o(v,r);break}a||void 0===(v=o(v))||(u[m]=v)}return u};s.defaults={},e.removeCookie=function(t,n){return e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t)}}),window.JSON||(window.JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,a,o,r,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,n=0;o>n;n+=1)r[n]=str(n,l)||"null";return a=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+s+"]":"["+r.join(",")+"]",gap=s,a}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)i=rep[n],"string"==typeof i&&(a=str(i,l),a&&r.push(quote(i)+(gap?": ":":")+a));else for(i in l)Object.hasOwnProperty.call(l,i)&&(a=str(i,l),a&&r.push(quote(i)+(gap?": ":":")+a));return a=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+s+"}":"{"+r.join(",")+"}",gap=s,a}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var JSON=window.JSON,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,a=e[t];if(a&&"object"==typeof a)for(n in a)Object.hasOwnProperty.call(a,n)&&(i=walk(a,n),void 0!==i?a[n]=i:delete a[n]);return reviver.call(e,t,a)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){"use strict";var n=e.History=e.History||{},i=e.jQuery;if("undefined"!=typeof n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){i(e).bind(t,n)},trigger:function(e,t,n){i(e).trigger(t,n)},extractEventData:function(e,n,i){var a=n&&n.originalEvent&&n.originalEvent[e]||i&&i[e]||t;return a},onDomLoad:function(e){i(e)}},"undefined"!=typeof n.init&&n.init()}(window),function(e,t){"use strict";var n=e.document,i=e.setTimeout||i,a=e.clearTimeout||a,o=e.setInterval||o,r=e.History=e.History||{};if("undefined"!=typeof r.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");r.initHtml4=function(){return"undefined"!=typeof r.initHtml4.initialized?!1:(r.initHtml4.initialized=!0,r.enabled=!0,r.savedHashes=[],r.isLastHash=function(e){var t,n=r.getHashByIndex();return t=e===n},r.saveHash=function(e){return r.isLastHash(e)?!1:(r.savedHashes.push(e),!0)},r.getHashByIndex=function(e){var t=null;return t="undefined"==typeof e?r.savedHashes[r.savedHashes.length-1]:0>e?r.savedHashes[r.savedHashes.length+e]:r.savedHashes[e]},r.discardedHashes={},r.discardedStates={},r.discardState=function(e,t,n){var i,a=r.getHashByState(e);return i={discardedState:e,backState:n,forwardState:t},r.discardedStates[a]=i,!0},r.discardHash=function(e,t,n){var i={discardedHash:e,backState:n,forwardState:t};return r.discardedHashes[e]=i,!0},r.discardedState=function(e){var t,n=r.getHashByState(e);return t=r.discardedStates[n]||!1},r.discardedHash=function(e){var t=r.discardedHashes[e]||!1;return t},r.recycleState=function(e){var t=r.getHashByState(e);return r.discardedState(e)&&delete r.discardedStates[t],!0},r.emulated.hashChange&&(r.hashChangeInit=function(){r.checkerFunction=null;var t,i,a,s,l="";return r.isInternetExplorer()?(t="historyjs-iframe",i=n.createElement("iframe"),i.setAttribute("id",t),i.style.display="none",n.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),a="",s=!1,r.checkerFunction=function(){if(s)return!1;s=!0;var t=r.getHash()||"",n=r.unescapeHash(i.contentWindow.document.location.hash)||"";return t!==l?(l=t,n!==t&&(a=n=t,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=r.escapeHash(t)),r.Adapter.trigger(e,"hashchange")):n!==a&&(a=n,r.setHash(n,!1)),s=!1,!0}):r.checkerFunction=function(){var t=r.getHash();return t!==l&&(l=t,r.Adapter.trigger(e,"hashchange")),!0},r.intervalList.push(o(r.checkerFunction,r.options.hashChangeInterval)),!0},r.Adapter.onDomLoad(r.hashChangeInit)),r.emulated.pushState&&(r.onHashChange=function(t){var i,a=t&&t.newURL||n.location.href,o=r.getHashByUrl(a),s=null,l=null;return r.isLastHash(o)?(r.busy(!1),!1):(r.doubleCheckComplete(),r.saveHash(o),o&&r.isTraditionalAnchor(o)?(r.Adapter.trigger(e,"anchorchange"),r.busy(!1),!1):(s=r.extractState(r.getFullUrl(o||n.location.href,!1),!0),r.isLastSavedState(s)?(r.busy(!1),!1):(l=r.getHashByState(s),i=r.discardedState(s),i?(r.getHashByIndex(-2)===r.getHashByState(i.forwardState)?r.back(!1):r.forward(!1),!1):(r.pushState(s.data,s.title,s.url,!1),!0))))},r.Adapter.bind(e,"hashchange",r.onHashChange),r.pushState=function(t,i,a,o){if(r.getHashByUrl(a))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(o!==!1&&r.busy())return r.pushQueue({scope:r,callback:r.pushState,args:arguments,queue:o}),!1;r.busy(!0);var s=r.createStateObject(t,i,a),l=r.getHashByState(s),c=r.getState(!1),d=r.getHashByState(c),u=r.getHash();return r.storeState(s),r.expectedStateId=s.id,r.recycleState(s),r.setTitle(s),l===d?(r.busy(!1),!1):l!==u&&l!==r.getShortUrl(n.location.href)?(r.setHash(l,!1),!1):(r.saveState(s),r.Adapter.trigger(e,"statechange"),r.busy(!1),!0)},r.replaceState=function(e,t,n,i){if(r.getHashByUrl(n))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(i!==!1&&r.busy())return r.pushQueue({scope:r,callback:r.replaceState,args:arguments,queue:i}),!1;r.busy(!0);var a=r.createStateObject(e,t,n),o=r.getState(!1),s=r.getStateByIndex(-2);return r.discardState(o,a,s),r.pushState(a.data,a.title,a.url,!1),!0}),r.emulated.pushState&&r.getHash()&&!r.emulated.hashChange&&r.Adapter.onDomLoad(function(){r.Adapter.trigger(e,"hashchange")}),void 0)},"undefined"!=typeof r.init&&r.init()}(window),function(e,t){"use strict";var n=e.console||t,i=e.document,a=e.navigator,o=e.sessionStorage||!1,r=e.setTimeout,s=e.clearTimeout,l=e.setInterval,c=e.clearInterval,d=e.JSON,u=e.alert,h=e.History=e.History||{},p=e.history;if(d.stringify=d.stringify||d.encode,d.parse=d.parse||d.decode,"undefined"!=typeof h.init)throw new Error("History.js Core has already been loaded...");h.init=function(){return"undefined"==typeof h.Adapter?!1:("undefined"!=typeof h.initCore&&h.initCore(),"undefined"!=typeof h.initHtml4&&h.initHtml4(),!0)},h.initCore=function(){if("undefined"!=typeof h.initCore.initialized)return!1;if(h.initCore.initialized=!0,h.options=h.options||{},h.options.hashChangeInterval=h.options.hashChangeInterval||100,h.options.safariPollInterval=h.options.safariPollInterval||500,h.options.doubleCheckInterval=h.options.doubleCheckInterval||500,h.options.storeInterval=h.options.storeInterval||1e3,h.options.busyDelay=h.options.busyDelay||250,h.options.debug=h.options.debug||!1,h.options.initialTitle=h.options.initialTitle||i.title,h.intervalList=[],h.clearAllIntervals=function(){var e,t=h.intervalList;if("undefined"!=typeof t&&null!==t){for(e=0;e<t.length;e++)c(t[e]);h.intervalList=null}},h.debug=function(){(h.options.debug||!1)&&h.log.apply(h,arguments)},h.log=function(){var e,t,a,o,r,s="undefined"!=typeof n&&"undefined"!=typeof n.log&&"undefined"!=typeof n.log.apply,l=i.getElementById("log");for(s?(o=Array.prototype.slice.call(arguments),e=o.shift(),"undefined"!=typeof n.debug?n.debug.apply(n,[e,o]):n.log.apply(n,[e,o])):e="\n"+arguments[0]+"\n",t=1,a=arguments.length;a>t;++t){if(r=arguments[t],"object"==typeof r&&"undefined"!=typeof d)try{r=d.stringify(r)}catch(c){}e+="\n"+r+"\n"}return l?(l.value+=e+"\n-----\n",l.scrollTop=l.scrollHeight-l.clientHeight):s||u(e),!0},h.getInternetExplorerMajorVersion=function(){var e=h.getInternetExplorerMajorVersion.cached="undefined"!=typeof h.getInternetExplorerMajorVersion.cached?h.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=i.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&n[0];);return e>4?e:!1}();return e},h.isInternetExplorer=function(){var e=h.isInternetExplorer.cached="undefined"!=typeof h.isInternetExplorer.cached?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion());return e},h.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(a.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(a.userAgent)),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in i)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)},h.enabled=!h.emulated.pushState,h.bugs={setHash:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===a.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(a.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===a.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(a.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)},h.isEmptyObject=function(e){for(var t in e)return!1;return!0},h.cloneObject=function(e){var t,n;return e?(t=d.stringify(e),n=d.parse(t)):n={},n},h.getRootUrl=function(){var e=i.location.protocol+"//"+(i.location.hostname||i.location.host);return i.location.port&&(e+=":"+i.location.port),e+="/"},h.getBaseHref=function(){var e=i.getElementsByTagName("base"),t=null,n="";return 1===e.length&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},h.getBaseUrl=function(){var e=h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl();return e},h.getPageUrl=function(){var e,t=h.getState(!1,!1),n=(t||{}).url||i.location.href;return e=n.replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"})},h.getBasePageUrl=function(){var e=i.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/";return e},h.getFullUrl=function(e,t){var n=e,i=e.substring(0,1);return t="undefined"==typeof t?!0:t,/[a-z]+\:\/\//.test(e)||(n="/"===i?h.getRootUrl()+e.replace(/^\/+/,""):"#"===i?h.getPageUrl().replace(/#.*/,"")+e:"?"===i?h.getPageUrl().replace(/[\?#].*/,"")+e:t?h.getBaseUrl()+e.replace(/^(\.\/)+/,""):h.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},h.getShortUrl=function(e){var t=e,n=h.getBaseUrl(),i=h.getRootUrl();return h.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(i,"/"),h.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},h.store={},h.idToState=h.idToState||{},h.stateToId=h.stateToId||{},h.urlToId=h.urlToId||{},h.storedStates=h.storedStates||[],h.savedStates=h.savedStates||[],h.normalizeStore=function(){h.store.idToState=h.store.idToState||{},h.store.urlToId=h.store.urlToId||{},h.store.stateToId=h.store.stateToId||{}},h.getState=function(e,t){"undefined"==typeof e&&(e=!0),"undefined"==typeof t&&(t=!0);var n=h.getLastSavedState();return!n&&t&&(n=h.createStateObject()),e&&(n=h.cloneObject(n),n.url=n.cleanUrl||n.url),n},h.getIdByState=function(e){var t,n=h.extractId(e.url);if(!n)if(t=h.getStateString(e),"undefined"!=typeof h.stateToId[t])n=h.stateToId[t];else if("undefined"!=typeof h.store.stateToId[t])n=h.store.stateToId[t];else{for(;n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!=typeof h.idToState[n]||"undefined"!=typeof h.store.idToState[n];);h.stateToId[t]=n,h.idToState[n]=e}return n},h.normalizeState=function(e){var t,n;return e&&"object"==typeof e||(e={}),"undefined"!=typeof e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),t={},t.normalized=!0,t.title=e.title||"",t.url=h.getFullUrl(h.unescapeString(e.url||i.location.href)),t.hash=h.getShortUrl(t.url),t.data=h.cloneObject(e.data),t.id=h.getIdByState(t),
t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!h.isEmptyObject(t.data),(t.title||n)&&(t.hash=h.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=h.getFullUrl(t.hash),(h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},h.createStateObject=function(e,t,n){var i={data:e,title:t,url:n};return i=h.normalizeState(i)},h.getStateById=function(e){e=String(e);var n=h.idToState[e]||h.store.idToState[e]||t;return n},h.getStateString=function(e){var t,n,i;return t=h.normalizeState(e),n={data:t.data,title:e.title,url:e.url},i=d.stringify(n)},h.getStateId=function(e){var t,n;return t=h.normalizeState(e),n=t.id},h.getHashByState=function(e){var t,n;return t=h.normalizeState(e),n=t.hash},h.extractId=function(e){var t,n,i;return n=/(.*)\&_suid=([0-9]+)$/.exec(e),i=n?n[1]||e:e,t=n?String(n[2]||""):"",t||!1},h.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t},h.extractState=function(e,t){var n,i,a=null;return t=t||!1,n=h.extractId(e),n&&(a=h.getStateById(n)),a||(i=h.getFullUrl(e),n=h.getIdByUrl(i)||!1,n&&(a=h.getStateById(n)),!a&&t&&!h.isTraditionalAnchor(e)&&(a=h.createStateObject(null,null,i))),a},h.getIdByUrl=function(e){var n=h.urlToId[e]||h.store.urlToId[e]||t;return n},h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||t},h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||t},h.hasUrlDuplicate=function(e){var t,n=!1;return t=h.extractState(e.url),n=t&&t.id!==e.id},h.storeState=function(e){return h.urlToId[e.url]=e.id,h.storedStates.push(h.cloneObject(e)),e},h.isLastSavedState=function(e){var t,n,i,a=!1;return h.savedStates.length&&(t=e.id,n=h.getLastSavedState(),i=n.id,a=t===i),a},h.saveState=function(e){return h.isLastSavedState(e)?!1:(h.savedStates.push(h.cloneObject(e)),!0)},h.getStateByIndex=function(e){var t=null;return t="undefined"==typeof e?h.savedStates[h.savedStates.length-1]:0>e?h.savedStates[h.savedStates.length+e]:h.savedStates[e]},h.getHash=function(){var e=h.unescapeHash(i.location.hash);return e},h.unescapeString=function(t){for(var n,i=t;n=e.unescape(i),n!==i;)i=n;return i},h.unescapeHash=function(e){var t=h.normalizeHash(e);return t=h.unescapeString(t)},h.normalizeHash=function(e){var t=e.replace(/[^#]*#/,"").replace(/#.*/,"");return t},h.setHash=function(e,t){var n,a,o;return t!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:t}),!1):(n=h.escapeHash(e),h.busy(!0),a=h.extractState(e,!0),a&&!h.emulated.pushState?h.pushState(a.data,a.title,a.url,!1):i.location.hash!==n&&(h.bugs.setHash?(o=h.getPageUrl(),h.pushState(null,null,o+"#"+n,!1)):i.location.hash=n),h)},h.escapeHash=function(t){var n=h.normalizeHash(t);return n=e.escape(n),h.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},h.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=h.unescapeHash(t)},h.setTitle=function(e){var t,n=e.title;n||(t=h.getStateByIndex(0),t&&t.url===e.url&&(n=t.title||h.options.initialTitle));try{i.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(a){}return i.title=n,h},h.queues=[],h.busy=function(e){if("undefined"!=typeof e?h.busy.flag=e:"undefined"==typeof h.busy.flag&&(h.busy.flag=!1),!h.busy.flag){s(h.busy.timeout);var t=function(){var e,n,i;if(!h.busy.flag)for(e=h.queues.length-1;e>=0;--e)n=h.queues[e],0!==n.length&&(i=n.shift(),h.fireQueueItem(i),h.busy.timeout=r(t,h.options.busyDelay))};h.busy.timeout=r(t,h.options.busyDelay)}return h.busy.flag},h.busy.flag=!1,h.fireQueueItem=function(e){return e.callback.apply(e.scope||h,e.args||[])},h.pushQueue=function(e){return h.queues[e.queue||0]=h.queues[e.queue||0]||[],h.queues[e.queue||0].push(e),h},h.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),"undefined"!=typeof t&&(e.queue=t),h.busy()?h.pushQueue(e):h.fireQueueItem(e),h},h.clearQueue=function(){return h.busy.flag=!1,h.queues=[],h},h.stateChanged=!1,h.doubleChecker=!1,h.doubleCheckComplete=function(){return h.stateChanged=!0,h.doubleCheckClear(),h},h.doubleCheckClear=function(){return h.doubleChecker&&(s(h.doubleChecker),h.doubleChecker=!1),h},h.doubleCheck=function(e){return h.stateChanged=!1,h.doubleCheckClear(),h.bugs.ieDoubleCheck&&(h.doubleChecker=r(function(){return h.doubleCheckClear(),h.stateChanged||e(),!0},h.options.doubleCheckInterval)),h},h.safariStatePoll=function(){var t,n=h.extractState(i.location.href);if(!h.isLastSavedState(n))return t=n,t||(t=h.createStateObject()),h.Adapter.trigger(e,"popstate"),h},h.back=function(e){return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.back,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.back(!1)}),p.go(-1),!0)},h.forward=function(e){return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.forward(!1)}),p.go(1),!0)},h.go=function(e,t){var n;if(e>0)for(n=1;e>=n;++n)h.forward(t);else{if(!(0>e))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)h.back(t)}return h},h.emulated.pushState){var g=function(){};h.pushState=h.pushState||g,h.replaceState=h.replaceState||g}else h.onPopState=function(t,n){var a,o,r=!1,s=!1;return h.doubleCheckComplete(),a=h.getHash(),a?(o=h.extractState(a||i.location.href,!0),o?h.replaceState(o.data,o.title,o.url,!1):(h.Adapter.trigger(e,"anchorchange"),h.busy(!1)),h.expectedStateId=!1,!1):(r=h.Adapter.extractEventData("state",t,n)||!1,s=r?h.getStateById(r):h.expectedStateId?h.getStateById(h.expectedStateId):h.extractState(i.location.href),s||(s=h.createStateObject(null,null,i.location.href)),h.expectedStateId=!1,h.isLastSavedState(s)?(h.busy(!1),!1):(h.storeState(s),h.saveState(s),h.setTitle(s),h.Adapter.trigger(e,"statechange"),h.busy(!1),!0))},h.Adapter.bind(e,"popstate",h.onPopState),h.pushState=function(t,n,i,a){if(h.getHashByUrl(i)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(a!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:a}),!1;h.busy(!0);var o=h.createStateObject(t,n,i);return h.isLastSavedState(o)?h.busy(!1):(h.storeState(o),h.expectedStateId=o.id,p.pushState(o.id,o.title,o.url),h.Adapter.trigger(e,"popstate")),!0},h.replaceState=function(t,n,i,a){if(h.getHashByUrl(i)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(a!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:a}),!1;h.busy(!0);var o=h.createStateObject(t,n,i);return h.isLastSavedState(o)?h.busy(!1):(h.storeState(o),h.expectedStateId=o.id,p.replaceState(o.id,o.title,o.url),h.Adapter.trigger(e,"popstate")),!0};if(o){try{h.store=d.parse(o.getItem("History.store"))||{}}catch(f){h.store={}}h.normalizeStore()}else h.store={},h.normalizeStore();h.Adapter.bind(e,"beforeunload",h.clearAllIntervals),h.Adapter.bind(e,"unload",h.clearAllIntervals),h.saveState(h.storeState(h.extractState(i.location.href,!0))),o&&(h.onUnload=function(){var e,t;try{e=d.parse(o.getItem("History.store"))||{}}catch(n){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in h.idToState)h.idToState.hasOwnProperty(t)&&(e.idToState[t]=h.idToState[t]);for(t in h.urlToId)h.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=h.urlToId[t]);for(t in h.stateToId)h.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=h.stateToId[t]);h.store=e,h.normalizeStore(),o.setItem("History.store",d.stringify(e))},h.intervalList.push(l(h.onUnload,h.options.storeInterval)),h.Adapter.bind(e,"beforeunload",h.onUnload),h.Adapter.bind(e,"unload",h.onUnload)),h.emulated.pushState||(h.bugs.safariPoll&&h.intervalList.push(l(h.safariStatePoll,h.options.safariPollInterval)),("Apple Computer, Inc."===a.vendor||"Mozilla"===(a.appCodeName||""))&&(h.Adapter.bind(e,"hashchange",function(){h.Adapter.trigger(e,"popstate")}),h.getHash()&&h.Adapter.onDomLoad(function(){h.Adapter.trigger(e,"hashchange")})))},h.init()}(window),honey.def(function(e){function t(){return time=String(Date.parse(new Date)).substring(0,10),rd=String(Math.random()),nonce=String(rd+time+time+rd).substring(0,32),time+nonce}function n(e,t,n){this.e=f(e),this.d=f(t),this.m=f(n),this.chunkSize=2*y(this.m),this.radix=16,this.barrett=new A(this.m)}function a(e,t){for(var n=new Array,i=t.length,a=0;i>a;)n[a]=t.charCodeAt(a),a++;for(;n.length%e.chunkSize!=0;)n[a++]=0;var o,s,l,c=n.length,u="";for(a=0;c>a;a+=e.chunkSize){for(l=new r,o=0,s=a;s<a+e.chunkSize;++o)l.digits[o]=n[s++],l.digits[o]+=n[s++]<<8;var p=e.barrett.powMod(l,e.e),g=16==e.radix?h(p):d(p,e.radix);u+=g+" "}return u.substring(0,u.length-1)}function o(e){_=e,R=new Array(_);for(var t=0;t<R.length;t++)R[t]=0;z=new r,L=new r,L.digits[0]=1}function r(e){"boolean"==typeof e&&1==e?this.digits=null:this.digits=R.slice(0),this.isNeg=!1}function s(e){var t=new r(!0);return t.digits=e.digits.slice(0),t.isNeg=e.isNeg,t}function l(e){var t=new r;t.isNeg=0>e,e=Math.abs(e);for(var n=0;e>0;)t.digits[n++]=e&q,e=Math.floor(e/F);return t}function c(e){for(var t="",n=e.length-1;n>-1;--n)t+=e.charAt(n);return t}function d(e,t){var n=new r;n.digits[0]=t;for(var i=$(e,n),a=J[i[1].digits[0]];1==O(i[0],z);)i=$(i[0],n),digit=i[1].digits[0],a+=J[i[1].digits[0]];return(e.isNeg?"-":"")+c(a)}function u(e){var t=15,n="";for(i=0;i<4;++i)n+=G[e&t],e>>>=4;return c(n)}function h(e){for(var t="",n=(y(e),y(e));n>-1;--n)t+=u(e.digits[n]);return t}function p(e){var t,n=48,i=n+9,a=97,o=a+25,r=65,s=90;return t=e>=n&&i>=e?e-n:e>=r&&s>=e?10+e-r:e>=a&&o>=e?10+e-a:0}function g(e){for(var t=0,n=Math.min(e.length,4),i=0;n>i;++i)t<<=4,t|=p(e.charCodeAt(i));return t}function f(e){for(var t=new r,n=e.length,i=n,a=0;i>0;i-=4,++a)t.digits[a]=g(e.substr(Math.max(i-4,0),Math.min(i,4)));return t}function m(e,t){var n;if(e.isNeg!=t.isNeg)t.isNeg=!t.isNeg,n=v(e,t),t.isNeg=!t.isNeg;else{n=new r;for(var i,a=0,o=0;o<e.digits.length;++o)i=e.digits[o]+t.digits[o]+a,n.digits[o]=i%F,a=Number(i>=F);n.isNeg=e.isNeg}return n}function v(e,t){var n;if(e.isNeg!=t.isNeg)t.isNeg=!t.isNeg,n=m(e,t),t.isNeg=!t.isNeg;else{n=new r;var i,a;a=0;for(var o=0;o<e.digits.length;++o)i=e.digits[o]-t.digits[o]+a,n.digits[o]=i%F,n.digits[o]<0&&(n.digits[o]+=F),a=0-Number(0>i);if(-1==a){a=0;for(var o=0;o<e.digits.length;++o)i=0-n.digits[o]+a,n.digits[o]=i%F,n.digits[o]<0&&(n.digits[o]+=F),a=0-Number(0>i);n.isNeg=!e.isNeg}else n.isNeg=e.isNeg}return n}function y(e){for(var t=e.digits.length-1;t>0&&0==e.digits[t];)--t;return t}function w(e){var t,n=y(e),i=e.digits[n],a=(n+1)*B;for(t=a;t>a-B&&0==(32768&i);--t)i<<=1;return t}function b(e,t){for(var n,i,a,o=new r,s=y(e),l=y(t),c=0;l>=c;++c){for(n=0,a=c,j=0;j<=s;++j,++a)i=o.digits[a]+e.digits[j]*t.digits[c]+n,o.digits[a]=i&q,n=i>>>M;o.digits[c+s+1]=n}return o.isNeg=e.isNeg!=t.isNeg,o}function S(e,t){var n,i,a;result=new r,n=y(e),i=0;for(var o=0;n>=o;++o)a=result.digits[o]+e.digits[o]*t+i,result.digits[o]=a&q,i=a>>>M;return result.digits[1+n]=i,result}function x(e,t,n,i,a){for(var o=Math.min(t+a,e.length),r=t,s=i;o>r;++r,++s)n[s]=e[r]}function k(e,t){var n=Math.floor(t/B),i=new r;x(e.digits,0,i.digits,n,i.digits.length-n);for(var a=t%B,o=B-a,s=i.digits.length-1,l=s-1;s>0;--s,--l)i.digits[s]=i.digits[s]<<a&q|(i.digits[l]&Q[a])>>>o;return i.digits[0]=i.digits[s]<<a&q,i.isNeg=e.isNeg,i}function I(e,t){var n=Math.floor(t/B),i=new r;x(e.digits,n,i.digits,0,e.digits.length-n);for(var a=t%B,o=B-a,s=0,l=s+1;s<i.digits.length-1;++s,++l)i.digits[s]=i.digits[s]>>>a|(i.digits[l]&K[a])<<o;return i.digits[i.digits.length-1]>>>=a,i.isNeg=e.isNeg,i}function C(e,t){var n=new r;return x(e.digits,0,n.digits,t,n.digits.length-t),n}function T(e,t){var n=new r;return x(e.digits,t,n.digits,0,n.digits.length-t),n}function E(e,t){var n=new r;return x(e.digits,0,n.digits,0,t),n}function O(e,t){if(e.isNeg!=t.isNeg)return 1-2*Number(e.isNeg);for(var n=e.digits.length-1;n>=0;--n)if(e.digits[n]!=t.digits[n])return e.isNeg?1-2*Number(e.digits[n]>t.digits[n]):1-2*Number(e.digits[n]<t.digits[n]);return 0}function $(e,t){var n,i,a=w(e),o=w(t),l=t.isNeg;if(o>a)return e.isNeg?(n=s(L),n.isNeg=!t.isNeg,e.isNeg=!1,t.isNeg=!1,i=v(t,e),e.isNeg=!0,t.isNeg=l):(n=new r,i=s(e)),new Array(n,i);n=new r,i=e;for(var c=Math.ceil(o/B)-1,d=0;t.digits[c]<P;)t=k(t,1),++d,++o,c=Math.ceil(o/B)-1;i=k(i,d),a+=d;for(var u=Math.ceil(a/B)-1,h=C(t,u-c);-1!=O(i,h);)++n.digits[u-c],i=v(i,h);for(var p=u;p>c;--p){var g=p>=i.digits.length?0:i.digits[p],f=p-1>=i.digits.length?0:i.digits[p-1],b=p-2>=i.digits.length?0:i.digits[p-2],x=c>=t.digits.length?0:t.digits[c],T=c-1>=t.digits.length?0:t.digits[c-1];g==x?n.digits[p-c-1]=q:n.digits[p-c-1]=Math.floor((g*F+f)/x);for(var E=n.digits[p-c-1]*(x*F+T),$=g*V+(f*F+b);E>$;)--n.digits[p-c-1],E=n.digits[p-c-1]*(x*F|T),$=g*F*F+(f*F+b);h=C(t,p-c-1),i=v(i,S(h,n.digits[p-c-1])),i.isNeg&&(i=m(i,h),--n.digits[p-c-1])}return i=I(i,d),n.isNeg=e.isNeg!=l,e.isNeg&&(n=l?m(n,L):v(n,L),t=I(t,d),i=v(t,i)),0==i.digits[0]&&0==y(i)&&(i.isNeg=!1),new Array(n,i)}function N(e,t){return $(e,t)[0]}function A(e){this.modulus=s(e),this.k=y(this.modulus)+1;var t=new r;t.digits[2*this.k]=1,this.mu=N(t,this.modulus),this.bkplus1=new r,this.bkplus1.digits[this.k+1]=1,this.modulo=U,this.multiplyMod=D,this.powMod=H}function U(e){var t=T(e,this.k-1),n=b(t,this.mu),i=T(n,this.k+1),a=E(e,this.k+1),o=b(i,this.modulus),r=E(o,this.k+1),s=v(a,r);s.isNeg&&(s=m(s,this.bkplus1));for(var l=O(s,this.modulus)>=0;l;)s=v(s,this.modulus),l=O(s,this.modulus)>=0;return s}function D(e,t){var n=b(e,t);return this.modulo(n)}function H(e,t){var n=new r;n.digits[0]=1;for(var i=e,a=t;;){if(0!=(1&a.digits[0])&&(n=this.multiplyMod(n,i)),a=I(a,1),0==a.digits[0]&&0==y(a))break;i=this.multiplyMod(i,i)}return n}e.encodePassword=function(e){var i="A5245A4630DD7CE9D8A967E33A50EB52C2634FD042C4BFBCF5A5C1317A234FD0D1D2C75D083946AF70CE480C399FAD8EEBE9F5A904F30E4D3C91CDD7C27C4D07E27015D46B29A003E9D49834E19041A7BA45A95E6161697975721E88949E8023DA682895086223683593F054E7AAE0E07C40DB33BD80EE5909CE48D17C07D097";return o(131),e=t()+e,a(new n("10001","",i),e)};var _,R,z,L,M=16,B=M,F=65536,P=F>>>1,V=F*F,q=F-1;o(20);var J=(l(1e15),new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z")),G=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),Q=new Array(0,32768,49152,57344,61440,63488,64512,65024,65280,65408,65472,65504,65520,65528,65532,65534,65535),K=new Array(0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535)}),window.Messenger=function(){function e(e,t){var n="";if(arguments.length<2?n="target error - target and name are both required":"object"!=typeof e?n="target error - target itself must be window object":"string"!=typeof t&&(n="target error - target name must be string type"),n)throw new Error(n);this.target=e,this.name=t}function t(e,t){this.targets={},this.name=e,this.listenFunc=[],n=t||n,"string"!=typeof n&&(n=n.toString()),this.initListen()}var n="[PROJECT_NAME]",i="postMessage"in window;return i?e.prototype.send=function(e){this.target.postMessage(n+e,"*")}:e.prototype.send=function(e){var t=window.navigator[n+this.name];if("function"!=typeof t)throw new Error("target callback function is not defined");t(n+e,window)},t.prototype.addTarget=function(t,n){var i=new e(t,n);this.targets[n]=i},t.prototype.initListen=function(){var e=this,t=function(t){"object"==typeof t&&t.data&&(t=t.data),t=t.slice(n.length);for(var i=0;i<e.listenFunc.length;i++)e.listenFunc[i](t)};i?"addEventListener"in document?window.addEventListener("message",t,!1):"attachEvent"in document&&window.attachEvent("onmessage",t):window.navigator[n+this.name]=t},t.prototype.listen=function(e){this.listenFunc.push(e)},t.prototype.clear=function(){this.listenFunc=[]},t.prototype.send=function(e){var t,n=this.targets;for(t in n)n.hasOwnProperty(t)&&n[t].send(e)},t}(),function(e,t,n){function i(){e(this).find(c).each(o)}function a(e){for(var t=e.attributes,n={},i=/^jQuery\d+/,a=0;a<t.length;a++)t[a].specified&&!i.test(t[a].name)&&(n[t[a].name]=t[a].value);return n}function o(){var t,n=e(this);n.is(":password")||(n.data("password")?(t=n.next().show().focus(),e("label[for="+n.attr("id")+"]").attr("for",t.attr("id")),n.remove()):n.realVal()==n.attr("placeholder")&&(n.val(""),n.removeClass("placeholder")))}function r(){var t,n,i=e(this);placeholder=i.attr("placeholder"),e.trim(i.val()).length>0||(i.is(":password")?(n=i.attr("id")+"-clone",t=e("<input/>").attr(e.extend(a(this),{type:"text",value:placeholder,"data-password":1,id:n})).addClass("placeholder"),i.before(t).hide(),e("label[for="+i.attr("id")+"]").attr("for",n)):(i.val(placeholder),i.addClass("placeholder")))}var s="placeholder"in t.createElement("input"),l="placeholder"in t.createElement("textarea"),c=":input[placeholder]";return e.placeholder={input:s,textarea:l},!n&&s&&l?void(e.fn.placeholder=function(){}):(n||!s||l||(c="textarea[placeholder]"),e.fn.realVal=e.fn.val,e.fn.val=function(){var t,n,i=e(this);return arguments.length>0?i.realVal.apply(this,arguments):(t=i.realVal(),n=i.attr("placeholder"),t==n?"":t)},e.fn.placeholder=function(){return this.filter(c).each(r),this},void e(function(e){var n=e(t);n.on("submit","form",i),n.on("focus",c,o),n.on("blur",c,r),e(c).placeholder()}))}(jQuery,document,window.debug),HN.dialog=function(e){function t(){var e=i.html||['<div class="dialog mod-dialog" id="'+i.id+'">','<div class="black pa"></div>','<div class="honey-dialog-conBox dialog-wrap">',"</div>","</div>"].join(""),t=[];return 0==$("#honey-dialog-bgframe").length&&(t=['<iframe id="honey-dialog-bgframe" framebroder=0 />','<div id="honey-dialog-overlay"></div>'].join("")),$(i.appendTo).append(e),i.needBG&&$("body").append(t),$("#"+i.id)}var n=this,i=n.settings=$.extend({id:"honey-dialog",width:"auto",height:"auto",position:"center",fixed:!0,opacity:0,needBG:!0,disableBgClick:!1,close:!1,html:!1,appendTo:"body",content:"",zindex:999},e);n.init=function(){n.box=$("#"+n.settings.id).length?$("#"+n.settings.id):t(),n.conBox=n.box.find(".honey-dialog-conBox"),n.bg=$("#honey-dialog-overlay"),n.bgiframe=$("#honey-dialog-bgframe"),n.ie6=HN.ie<7,n.inited=!0,n.reInit=!1,n.setContent(i.content),n.box.on("click",".honey-dialog-close",function(){return n.close(),!1})}},HN.dialog.prototype={open:function(){var e=this;e.inited?(e.box.show(),e.setPosition(e.settings.width,e.settings.height),e.settings.needBG&&(e.bg.show(),e.bgiframe.show())):e.init()},find:function(e){var t=this;return t.conBox.find(e)},setSize:function(e,t){var n=this,i=n.box,a=(n.conBox,t),o=e;i.css({width:+o,height:+a}),i.find(".w-top-m, .w-main-m, .w-buttom-m").width(o-24),i.find(".w-main-l, .w-main-m, .w-main-r").height(a-24),n.setPosition(o,a)},showLoading:function(){var e=this,t=$("<img />",{src:e.loadingimage,height:55,width:55,style:"margin-left: 5px"});e.setContent(t,[85,85])},setContent:function(e,t){var n=this,i=t?t[0]:n.settings.width,a=t?t[1]:n.settings.height;"function"==typeof e?(n.showLoading(),e(n)):(n.conBox.html(e),n.setSize(i,a))},setPosition:function(e,t){var n=this,i=n.settings.position,a=$(window),o=!n.ie6&&n.settings.fixed,r=a.width(),s=a.height(),l=a.scrollTop(),c={position:o?"fixed":"absolute",zIndex:n.settings.zindex},d=!1;if(t="auto"==t?+n.conBox.height()+10+24:t,e="auto"==e?+n.conBox.width()+10+24:e,"center"==i)c.left=(r-e)/2,c.top=(s-t)/3,!o&&(c.top+=l);else if("rightTop"==i)c.right=10,c.top=10,!o&&(c.top+=l);else if("rightBottom"==i)c.bottom=10,c.right=10,!o&&(c.top+=l);else{if("object"!=typeof i)return;if(4==i.length)c.top=i[0],c.right=i[1],c.bottom=i[2],c.left=i[3];else{var u=$(i),h=u.position(),p=u.height();c.left=h.left,c.top=h.top+p+5,c.position="absolute",n.settings.fixed=o=!1}}"auto"===c.top&&(c.top=s-c.bottom-t),n.box.css(c),n.settings.needBG&&n.setIframe(r,s,l),n.ie6&&n.settings.fixed&&!n.box.scrollbinded&&a.scroll(function(){d=!0,n.box.scrollbinded=!0}),setInterval(function(){d&&(n.resetPos.call(n,a,c.top-l),d=!1)},250),!n.box.resizebinded&&a.resize(function(){n.box.resizebinded=!0,n.setPosition.call(n,n.box.width(),n.box.height())})},resetPos:function(e,t){var n=this,i=t,a=e.scrollTop();n.box.stop().animate({top:+(i+a)},500)},setIframe:function(e,t,n){var i=this,a=window.document,o=Math.max(t,"CSS1Compat"===a.compatMode?a.documentElement.scrollHeight:a.body.scrollHeight),r={position:i.ie6?"absolute":"fixed",left:0,top:0,height:o,width:e,zIndex:i.settings.zindex-1,opacity:i.settings.opacity,backgroundColor:"#000"};i.bg.css(r),i.bgiframe.css(r),i.settings.disableBgClick||i.bg.unbind("click").click(function(){i.close.call(i)})},close:function(){var e=this;e.reInit?e.destroy():(e.box.hide(),e.settings.needBG&&(e.bg.hide(),e.bgiframe.hide()),e.settings.close&&e.settings.close.call(e,e))},setCloseCallBack:function(e){var t=this;t.settings.close=e},destroy:function(){var e=this;e.box.remove(),e.settings.needBG&&(e.bg.remove(),e.bgiframe.remove()),e.inited=!1}},honey.def("mod:dialog, plugin:encodePassword",function(e){"use strict";function t(e){var t=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),n=document.cookie.match(t);return n?n[1]:""}function n(e){d.show()}function i(e){d.hide()}function a(e,t){t.text(e).show()}function o(e){e.hide().empty()}function r(){return V++,V>240?(a("登录失败",y.find("#honey-mini-login-error")),clearTimeout(u),V=0,void i()):void $.getJSON(v,function(e){e.code<0&&(clearTimeout(u),u=setTimeout(r,1e3)),200===~~e.code&&(y.destroy(),clearTimeout(u),V=0,window.USER=e,p.trigger("HONEY-LOGIN-DONE"),p.trigger("HONEY-LOGIN-SUCCESS"),window.OnJSCallbackGetUID&&OnJSCallbackGetUID.call(window,e.data.uid),y=null)})}function s(e){e.preventDefault();var i=$(this).attr("type"),a={100:"qq",110:"tencent",200:"weibo",300:"wechat"},o=""==t("__STKUUID")?"0":t("__STKUUID"),s=l(),c="http://oauth.hunantv.com/2.0/"+a[i]+"/login?invoker=pc&type=1&from=http://i.mgtv.com&deviceid="+o+"&dname="+s;300===~~i&&(c="http://oauth.hunantv.com/2.0/wechat/login?invoker=pc&type=1&from=http://i.mgtv.com&deviceid="+o+"&dname="+s);window.open(c,"_blank","width=750, height=525");setTimeout(r,3e3),n(y);var d={100:1,200:3,300:2};k.ext1=d[i],R(k)}function l(){var e=navigator.userAgent.toLowerCase();return e.indexOf("msie")>=0?"IE":e.indexOf("chrome")>=0?"Chrome":e.indexOf("firefox")>=0?"Firefox":e.indexOf("opera")>=0?"opera":e.indexOf("safari")>=0?"safari":e.indexOf("mozilla")>=0?"mozilla":"other"}e.css("http://css.hunantv.com/imgotv-member/page/member/member-dialog.css");var c,d,u,h=$("body"),p=$(document),g="http://i.mgtv.com",f=g+"/vcode?from=pcclient&time=",m=$("img[node-type=mini-yzm-src]"),v=g+"/my/userinfo?callback=?",y=null,w=$(".yzm-mod"),b="honey-mini-login-dialog",S=/(^(([0\+]\d{2,3}-)?(0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$)|(^0{0,1}1[3|4|5|6|7|8|9][0-9]{9}$)/,x={},k={},I="login",C="fail",T=!1,E=['<div class="m-dialog-login" id="'+b+'">','<div class="m-content honey-dialog-conBox">',"</div>","</div>"].join(""),O=null,N=['<span class="head-gg" node-type="honey-top-bg"></span>','<div node-type="honey-mini-dialog-box">','        <a href="#" class="close honey-dialog-destroy"><em>关闭</em></a>','        <ul class="tab" node-type="tab-nav">','            <li class="current" action-type="honey-mini-login-tabs" type="login">登录</li>','            <li type="register" node-type="honey-mini-register-btn" action-type="honey-mini-login-tabs">注册</li>',"        </ul>",'        <div class="m-form-login info-box honey-mini-dialog" id="honey-mini-box-login" node-type="honey-mini-box-login">','            <p class="row msg-validate" id="honey-mini-login-error" style="display:none;"></p>','            <p class="row-title">账号</p>','            <p class="row"><input type="text" class="text mini-login-name" id="honey-mini-login-auto" placeholder="请输入手机号码或邮箱">','                   <span class="rowlayer-list" node-type="honey-mini-login-auto" style="display:none"></span>',"               </p>",'            <p class="row-title">密码</p>','            <p class="row">','               <input type="password" maxlength="20" class="text password login-dialog-password" placeholder="请输入密码">',"            </p>",'            <div class="yzm-mod" style="display:none;">','            <p class="row-title">验证码</p> ','            <p class="row">','                <input type="text" name="" class="text verifcode mini-login-yzm" placeholder="验证码">','                <span class="verif">','                    <img class="verifimg-img" node-type="mini-yzm-src" src="'+g+'/vcode" action-type="mini-yzm-refresh" alt="验证码">','                    <i class="verifimg-refresh" action-type="mini-yzm-refresh">刷新</i>',"                </span>","            </p>","            </div>",'            <p class="row-title"></p>','            <p class="row top2">','                <input type="checkbox" checked="checked" class="choose" node-type="honey-mini-login-auto">','                <label for="remember" class="label remember">记住我</label>','                <a class="note losepwd" target="_blank" href="'+g+'/account/backpwd">忘记密码？</a>',"            </p>",'            <p class="row"><a href="javascript:void(0)" class="btn btn-login" id="honey-mini-login-submit">登 录</a></p>',"        </div>",'        <div class="m-content" node-type="honey-mini-dialog-saoma" id="honey-mini-box-saoma" style="display:none;">','           <div class="m-form-saoma" node-type="register">','               <p class="m-form-image">','                   <img class="m-erweima-image" src="http://www.mgtv.com/image/global/saoma_default.gif"/>','                   <span class="m-erweima-tips"><b>180</b> 秒后为你更新二维码</span>','                   <span class="m-erweima-failed">扫码失败，请<b class="m-erweima-again"> 重试</b></span>','                   <span class="m-repeat-image-bg"></span>','                   <span class="m-repeat-image-intro">二维码失效<br>请点击刷新</span>','                   <span class="m-repeat-image-success">扫码成功<br>请在手机上确定</span>',"               </p>",'               <p class="m-form-intro"></p>',"           </div>",'           <a class="m-back-login">返回账号登录</a>',"        </div>",'        <div class="m-form-register info-box honey-mini-dialog" id="honey-mini-box-register" node-type="honey-mini-box-register" style="display:none;">','            <p class="row msg-validate" id="honey-mini-register-error" style="display:none">错误提示</p>','            <p class="row msg-validate ok-ts" style="display:none;">注册码发送成功</p>','            <p class="row-title" node-type="mini-register-type">手机</p>','            <p class="row"><input type="text" name="" class="text register-name username-reg" node-type="honey-mini-reg-name" placeholder="请输入手机号码">','                <span class="rowlayer-btn" type="phone" action-type="honey-mini-reg-email" style="display:none">邮箱注册</span>','                <span class="rowlayer-list" node-type="honey-mini-reg-auto" style="display:none"></span>',"            </p>",'            <p class="row-title" node-type="honey-mini-reg-pas">密码</p>','            <p class="row" node-type="honey-mini-reg-pas"><input type="password" maxlength="20" name="" class="text register-password" node-type="honey-mini-reg-safe" placeholder="请输入6~20位密码"></p>','            <p class="row-password-line" id="honey-mini-pass-safe" node-type="honey-mini-reg-pas" style="display:none">','                <span class="row-txt step">强度</span>','                <em class="row-line" node-type="honey-mini-line"></em><em class="row-line" node-type="honey-mini-line"></em><em class="row-line" node-type="honey-mini-line"></em>',"            </p>",'            <p class="row-title" node-type="honey-mini-email-yzm">验证码</p> ','            <p class="row" node-type="honey-mini-email-yzm">','                <input type="text" name="" class="text verifcode honey-mini-register-yzm" placeholder="验证码">','                <span class="verif">','                    <img class="verifimg-img" node-type="mini-yzm-src" src="" action-type="mini-yzm-refresh" alt="验证码">','                    <i class="verifimg-refresh" action-type="mini-yzm-refresh">刷新</i>',"                </span>","            </p>",'            <p class="row-title" node-type="honey-mini-phone-regcode">注册码</p>','            <p class="row" node-type="honey-mini-phone-regcode"><input type="text" name="" class="text phone-yzm username-reg" placeholder="请输入注册码">','                <span class="rowlayer-btn zcm" action-type="honey-mini-get-pollcode">获取注册码</span>',"            </p>",'            <p class="row-title"></p>','            <p class="row row-license">','                <input type="checkbox" name="" class="choose" id="honey-mini-license" checked="checked">','                <label for="license" class="label license">我已阅读<a href="http://i.mgtv.com/account/protocol" target="_blank">芒果tv用户协议</a>及<a href="http://i.mgtv.com/account/protocol" target="_blank">版权声明</a></label>',"            </p>",'            <p class="row"><a href="javascript:void(0)" class="btn btn-register" id="honey-mini-register">注 册</a></p>',"        </div>",'        <div id="honey-mini-box-email" node-type="honey-mini-box-email" class="m-form-register info-box honey-mini-dialog" style="display:none">','               <p class="row-sendemail">','                   <span class="row-sendemail-title" >还差一步即可完成注册</span>','                   <span class="row-sendemail-info">我们已经向您的邮箱 <em node-type="honey-mini-email-name"></em> <a href="#" action-type="honey-mini-reset-email">[更改注册邮箱]</a>发送了一封激活邮件，请点击邮件中的链接完成注册！</span>','                   <span class="row-sendemail-change">','                       <em class="ico-re" action-type="honey-mini-reset-send">重新发送</em>',"                   </span>","               </p>",'               <p class="row row-email"><a href="javascript:;" target="_blank" class="btn btn-register" node-type="honey-mini-reg-gotoEmail">立即进入邮箱</a></p>','               <p class="row-sendemail-ts">如果无法跳转，请手动打开邮箱</p>',"        </div>",'        <div class="c-union-login c-union-login-simple">','            <ul node-type="honey-mini-third">','                <li><a href="#" class="qq" type="100"><i></i><span>QQ</span></a></li>','                <li><a href="#" class="wx" type="300"><i></i><span>微信</span></a></li>','                <li class="last"><a href="#" class="wb" type="200"><i></i><span>新浪</span></a></li>',"            </ul>","        </div>","</div>",'<div class="m-content" node-type="honey-mini-dialog-suc" style="display:none;">','   <a href="#" class="close honey-dialog-close"><em>关闭</em></a>','   <p class="close-tx"><em node-type="honey-mini-suc-time">3s</em> 后自动关闭</p>','   <div class="m-form-register m-form-register-ok" node-type="register">','       <p class="register-ok">','           <span class="register-ok-title">恭喜您注册成功！</span>','           <span class="register-ok-info">昵称：<em node-type="honey-mini-suc-name"></em></span>',"       </p>",'       <p class="row row-email"><a href="#" class="btn btn-register btn-110 honey-dialog-close">关 闭</a></p>',"    </div>","</div>",'<a class="m-saoma-icon"></a>'].join(""),A=['<div class="login-check-dialog login-check-dialog-first">','<div class="m-content">','<div class="m-merr">','<a href="#" class="merr-close honey-dialog-destroy">关闭</a>','<p class="merr-head"><span>登录提醒</span></p>','<div class="merr-con">','<p class="merr-p1 merr-tips">您的账号登录的设备已超过上限，请<span class="title"></span>手机后再登录</p>','<p class="merr-p">','<a href="javascript:void(0)" class="merr-btn cancel honey-dialog-destroy">取消登录</a>','<a href="javascript:void(0)" class="merr-btn" id="login-check-first-btn"><span class="title"></span>手机</a>',"</p>","</div>","</div>","</div>","</div>",'<div class="login-check-dialog login-check-dialog-two " style="display:none;">','<div class="m-content">','<div class="m-merr">','<a href="javascript:void(0)" class="merr-close honey-dialog-destroy">关闭</a>','<p class="merr-head"><span><span class="title"></span>手机</span></p>','<div class="merr-con pt30">','<p class="merr-p">','<span class="merr-ts ok-ts">手机号码不能为空</span>','<span class="row-til">手机</span>','<span class="row"><input id="phone-name" name="" class="text user-phone" placeholder="请输入手机号码" type="text"></span>',"</p>",'<p class="merr-p">','<span class="row-til">校验码</span>','<span class="row row-1"><input id="yzm-name" name="" class="text phone-check-yzm" placeholder="请输入校验码" type="text"></span>','<a href="javascript:void(0)" class="merr-btn yzm-btn login-check-yzm-btn">获取校验码</a>',"</p>",'<p class="merr-p">','<span class="row-til"></span>','<a href="javascript:void(0)" class="merr-btn yzphone login-check-submit"><span class="title"></span>手机</a>',"</p>","</div>","</div>","</div>","</div>",'<div class="login-check-dialog login-check-dialog-three " style="display:none;">','<div class="m-content">','<div class="m-merr">','<a href="javascript:void(0)" class="merr-close honey-dialog-destroy">关闭</a>','<p class="merr-head"><span><span class="title"></span>手机</span></p>','<div class="merr-con">','<p class="merr-p1 okts">手机<span class="title"></span>成功<em><i class="login-check-dialog-three-clock">3<i>S 后关闭</em></p>',"</div>","</div>","</div>","</div>"].join(""),U={
"qq.com":"http://mail.qq.com","gmail.com":"http://mail.google.com","sina.com":"http://mail.sina.com.cn","sina.cn":"http://mail.sina.com.cn","163.com":"http://mail.163.com","126.com":"http://mail.126.com","sohu.com":"http://mail.sohu.com","sogou.com":"http://mail.sogou.com","139.com":"http://mail.10086.cn","189.com":"http://webmail16.189.cn/webmail","foxmail.com":"http://www.foxmail.com"},D=function(e){function t(e){var t=e.match(i);return null!=t&&t.length>0?t[1]:""}function n(){return s.indexOf("?")>0?void(c=s.substring(0,s.indexOf("?"))):s.indexOf("#")>0?void(c=s.substring(0,s.indexOf("#"))):void(c=s)}var i=/http:\/\/([^\/]+)/i,a={"www.hunantv.com":0,"so.hunantv.com":9,"list.hunantv.com":8,"live.hunantv.com":7,"i.mgtv.com":12},o={"^/$":0,"^/show/$":1,"^/movie/$":3,"^/tv/$":2,"^/cartoon/$":4,"^/child/$":5,"^/music/$":6,"^/live/$":7,"^/v/\\d{1,3}/\\d+/$":10,"^/v/\\d{1,3}/\\d+/[a-z]/\\d+\\.html$":11},r=13,s=e.replace(i,""),l=a[t(e)],c="";if(n(),0==l){var d=r;return $.map(o,function(e,t){var n=!1,i=new RegExp(t);try{n=i.test(c)}catch(a){}n&&(d=e)}),d}return l||r},H=function(e){e=e||"yyyyMMddhhmmss";var t=new Date,n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in n)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return e},_=function(e,t){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,t).toUpperCase()}}(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}),j=function(e,t){var n,i;$(e);n=$("span[node-type=honey-mini-"+t+"-auto]");var a=['<a href="#" hz=""></a>','<a href="#" hz="@qq.com"></a>','<a href="#" hz="@163.com"></a>','<a href="#" hz="@126.com"></a>','<a href="#" hz="@sina.com"></a>','<a href="#" hz="@sohu.com"></a>','<a href="#" hz="@gmail.com"></a>'].join("");n.html(a),i=n.find("a"),i.mousedown(function(){i.removeClass("hover"),$(this).addClass("hover"),$(e).val($(this).text()),n.hide()}),h.on("keyup",e,function(e){if(""==$(this).val()&&(n.hide(),i.html("")),/13|38|40|116/.test(e.keyCode)||""==$(this).val())return!1;var t=$(this).val();i.each(function(){this.innerHTML=(t.replace(/\@+.*/,"@")+$(this).attr("hz")).replace(/\@+/,"@"),this.innerHTML.indexOf(t)>=0?$(this).show():$(this).hide()}).filter(".hover").removeClass("hover"),n.show(),0==i.filter(":visible").length?n.hide():i.filter(":visible").eq(0).addClass("hover")}).keydown(function(e){38==e.keyCode?i.filter(".hover").prev().addClass("hover").next().removeClass("hover"):40==e.keyCode?i.filter(".hover").next().addClass("hover").prev().removeClass("hover"):13==e.keyCode&&(i.filter(".hover").mousedown(),e.preventDefault())}),h.on("blur",e,function(e){n.hide()})},R=function(e){var t="";for(var n in e)""!=t&&(t+="&"),t+=n+"="+encodeURIComponent(e[n]);var i=new Image(1,1);i.src="http://pcweb.v1.mgtv.com/dispatcher.do?"+t},z=!1,L=function(e){z||(z=new Messenger("parent","MessengerLogin")),z.listen(function(t){if(t){var n=$.parseJSON(t);$.isFunction(e)&&e(n),z.clear()}})},M={login:function(e){e.preventDefault();var i=($(this),/^([a-zA-Z0-9\_\.\-])+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/gi),r=y.find("#honey-mini-box-login"),s=r.find(".mini-login-name"),l=s.val(),c=r.find("#honey-mini-login-error"),d=r.find(".password"),u=r.find(".mini-login-yzm"),h=u.val(),p=d.val();if(""==$.trim(l))return a("帐号不能为空",c),s.focus(),!1;if(k={act:"login",time:H(),guid:t("MQGUID")||"",suuid:_(),uuid:t("uuid"),cookie:"",bid:"1.1.11",ch:"",url:encodeURIComponent(window.location.href),ext3:0,ext1:"",ext2:D(window.location.href),ext4:"",ext5:1},l.indexOf("@")>0){if(k.ext1=5,!i.test(l))return a("邮箱格式错误",c),s.focus(),!1}else{if(!S.test(l))return a("请输入正确的手机号码",c),s.focus(),!1;k.ext1=4}if(""==$.trim(p))return a("密码不能为空",c),d.focus(),!1;var g=w.css("display");if("block"==g&&""==$.trim(h))return a("验证码不能为空",c),u.focus(),!1;var f=0;$("input[node-type=honey-mini-login-auto]").is(":checked")&&(f=1,k.ext3=f),p=honey.encodePassword(p),o(c),n(),M.doAjaxLogin({username:l,password:p,vcode:h,rem:f})},doAjaxLogin:function(e){$("#honey-mini-login-submit").addClass("loading");var t=$("#honey-login-from"),n=$(".honey-login-from"),i="honey-login-from";if(0==t.length&&$('<iframe frameborder="0" height="0" name="'+i+'" id="'+i+'" width="0"/>').appendTo("body"),0==n.length){var a='<form action="'+g+'/account/loginVerify" target="'+i+'" method="post" class="honey-login-from"><input type="hidden" name="sub" value="1" /><input type="hidden" name="account" /><input type="hidden" name="pwd" /><input type="hidden" name="vcode" /><input type="hidden" name="remember" value="1" /></form>';n=$(a).appendTo("body")}$('[name="remember"]',n).val(e.rem),$('[name="account"]',n).val(e.username),$('[name="vcode"]',n).val(e.vcode),$('[name="pwd"]',n).val(e.password),n.submit(),L(function(e){M.succeed(e)})},succeed:function(t){200==t.code?(y.destroy(),window.USER=t,p.trigger("HONEY-LOGIN-DONE"),p.trigger("HONEY-LOGIN-SUCCESS"),window.OnJSCallbackGetUID&&OnJSCallbackGetUID.call(window,t.data.uid),R(k),y=null):-129==t.code?(window.USER=t,e.loginCheckDialog(t)):(-102==t.code,p.trigger("HONEY-LOGIN-ERR"),$("#honey-mini-login-error").html(t.msg).show(),$("#honey-mini-login-submit").removeClass("loading"),$.ajax({url:"http://i.mgtv.com/account/loginVerifyStatus",dataType:"jsonp",success:function(e){e&&200==e.code&&"success"==e.msg&&(1==e.data||2==e.data?($("img[node-type=mini-yzm-src]").attr("src",f+$.now()),$(".yzm-mod").show(),T=!0):($("img[node-type=mini-yzm-src]").attr("src",f+$.now()),$(".yzm-mod").hide(),T=!1))}}))}},B={check:function(e,t){function n(e){l.html(e).removeClass("ok-ts").show()}var i=O.find(".login-check-dialog-two"),a=i.find(".user-phone"),o=i.find(".phone-check-yzm"),r=a.attr("mobile")?a.attr("mobile"):a.val(),s=o.val(),l=O.find(".merr-ts");return""==$.trim(r)?(n("手机号码不能为空"),a.focus(),!1):S.test(r)?""==$.trim(s)?(n("校验码不能为空"),o.focus(),!1):(l.hide(),void B.doAjaxLogin({phone:r,code:s,is_relate_mobile:e,rtoken:t})):(n("请输入正确的手机号码"),a.focus(),!1)},doAjaxLogin:function(e){var t=O.find(".merr-ts");$.ajax({url:g+"/account/exceptionLogin",data:{phone:e.phone,code:e.code,is_relate_mobile:e.is_relate_mobile,rtoken:e.rtoken},type:"get",dataType:"jsonp",success:function(e){200==e.code&&"success"==e.msg?B.succeed(e):t.html(e.msg).removeClass("ok-ts").show()}})},succeed:function(e){O.find(".login-check-dialog-two").hide(),O.find(".login-check-dialog-three").show();var t=O.find(".login-check-dialog-three-clock"),n=3;setInterval(function(){--n,0==n?(O.destroy(),window.USER=e,p.trigger("HONEY-LOGIN-DONE"),p.trigger("HONEY-LOGIN-SUCCESS"),window.OnJSCallbackGetUID&&OnJSCallbackGetUID.call(window,e.data.uid)):t.html(n+"S 后关闭")},1e3)}},F={registe:function(e){function i(e){k.html(e).removeClass("ok-ts").show()}e.preventDefault();var a=($(this),/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/),r=y.find("#honey-mini-box-register"),s=r.find(".honey-mini-register-yzm"),l=r.find(".register-name"),c=l.val(),d=r.find(".register-password"),u=r.find(".phone-yzm"),h=d.val(),p=s.val(),m=y.find("li[node-type=honey-mini-register-btn]"),v=y.find("a[node-type=honey-mini-reg-gotoEmail]"),w=y.find("em[node-type=honey-mini-email-name]"),b=r.find("span[action-type=honey-mini-reg-email]").attr("type"),k=$("#honey-mini-register-error"),I="密码为6-20位，且仅限使用数字、字母或符号",C=g+"/account/sendRegEmail?callback=?",T=$("#honey-mini-license");return x={act:"register",time:H(),guid:t("MQGUID")||"",suuid:_(),uuid:t("uuid"),cookie:"",bid:"1.1.11",ch:"",url:encodeURIComponent(window.location.href),ext1:"",ext2:D(window.location.href)},""==$.trim(c)?(i("账号不能为空"),l.focus(),!1):"phone"!=b?a.test(c)?""==$.trim(p)?(i("验证码不能为空"),s.focus(),!1):T.attr("checked")?(k.hide(),x.ext1=2,$.getJSON(C,{email:c,vcode:p},function(e){e&&200==e.code?(R(x),v.attr("href",U[c.split("@")[1]]),w.html(c),r.hide(),m.attr("type","email"),$("#honey-mini-box-email").show()):(-109==e.code&&l.focus(),$("img[node-type=mini-yzm-src]").attr("src",f+$.now()),i(e.msg))}),!1):(i("请您勾选用户协议"),!1):(i("邮箱格式错误"),l.focus(),!1):S.test(c)?""==$.trim(h)?(i("密码不能为空"),d.focus(),!1):h.length<6?(i(I),d.focus(),!1):""==$.trim(s.val())?(i("验证码不能为空"),s.focus(),!1):""==$.trim(u.val())?(i("短信验证码不能为空"),u.focus(),!1):T.attr("checked")?(x.ext1=1,k.hide(),h=honey.encodePassword(h),o(k),n(),void F.doAjaxLogin({account:c,password:h,mobileCode:u.val()})):(i("请您勾选用户协议"),!1):(i("请输入正确的手机号码"),l.focus(),!1)},doAjaxLogin:function(e){$("#honey-mini-register").addClass("loading");var t=$("#honey-login-from"),n=$(".honey-register-from"),i="honey-login-from";if(0==t.length&&$('<iframe frameborder="0" height="0" name="'+i+'" id="'+i+'" width="0"/>').appendTo("body"),0==n.length){var a='<form action="'+g+'/account/mobileReg" target="'+i+'" method="post" class="honey-register-from"><input type="hidden" name="sub" value="1" /><input type="hidden" name="account" /><input type="hidden" name="password" /><input type="hidden" name="mobileCode" value="" /></form>';n=$(a).appendTo("body")}$('[name="account"]',n).val(e.account),$('[name="password"]',n).val(e.password),$('[name="mobileCode"]',n).val(e.mobileCode),n.submit(),L(function(e){F.succeed(e)})},succeed:function(e){var t=$("#honey-mini-register-error");200==e.code?(F.regSuccess(e.data.nickname),window.USER=e,p.trigger("HONEY-LOGIN-DONE"),p.trigger("HONEY-LOGIN-SUCCESS"),window.OnJSCallbackGetUID&&OnJSCallbackGetUID.call(window,e.data.uid),R(x)):(p.trigger("HONEY-LOGIN-ERR"),t.html(e.msg).removeClass("ok-ts").show(),$("#honey-mini-register").removeClass("loading"),m.attr("src",f+$.now()))},regSuccess:function(e){var t=$("div[node-type=honey-mini-dialog-box]"),n=$("div[node-type=honey-mini-dialog-suc]");$("em[node-type=honey-mini-suc-name]").html(e),t.hide(),n.show();var i=3;setInterval(function(){return--i,0==i?(y.destroy(),y=null,!1):void $("em[node-type=honey-mini-suc-time]").html(i+"s")},1e3)}},P=function(){function e(e){var n=""==t("__STKUUID")?"0":t("__STKUUID"),i="http://oauth.mgtv.com/2.0/getqrcode?invoker=pc&deviceid="+n+"&callback=?";$.getJSON(i,function(t){t&&0==t.err&&"00000"==t.status?$.isFunction(e)&&e.call(this,t):$(".m-form-image").addClass("repeat").find(".m-repeat-image-intro").text("二维码获取失败，请点击刷新")})}function n(e){clearTimeout(o),e&&0==e.err&&"00000"==e.status&&("waiting"!==C?($(".m-form-image").removeClass("repeat"),$(".m-erweima-image").attr("src",e.msg.pic_url),window.erweiUID=e.msg.uid||"",r=0,o=setTimeout(i,1e3)):o=setTimeout(i,1e3))}function i(){if(r++,r>62)return clearInterval(o),r=0,void $(".m-form-image").removeClass("success").addClass("repeat");var e="http://oauth.mgtv.com/2.0/polling?invoker=pc";$.ajax({url:e,data:{uid:window.erweiUID},type:"get",dataType:"jsonp",success:function(e){0==e.err&&"00000"==e.status?"201"==e.msg.code?(a(e),C="success"):"203"==e.msg.code?(o=setTimeout(i,3e3),C="fail"):"208"==e.msg.code&&($(".m-form-image").addClass("success"),o=setTimeout(i,3e3),C="waiting"):1==e.err&&"10045"==e.status&&($(".m-form-image").removeClass("success").addClass("repeat"),C="expire")}})}function a(e){0==e.err&&"00000"==e.status&&"201"==e.msg.code&&$.ajax({url:"http://i.mgtv.com/account/getByTicket?",data:{ticket:e.msg.ticket},type:"get",dataType:"jsonp",success:function(e){200==e.code?(y.destroy(),window.USER=e,p.trigger("HONEY-LOGIN-DONE"),p.trigger("HONEY-LOGIN-SUCCESS"),window.OnJSCallbackGetUID&&OnJSCallbackGetUID.call(window,e.data.uid),R(s),y=null):(-102==e.code&&$("#honey-mini-login-auto").focus(),p.trigger("HONEY-LOGIN-ERR"),$("#honey-mini-login-error").html(e.msg).show(),$("#honey-mini-login-submit").removeClass("loading"),$("img[node-type=mini-yzm-src]").attr("src",f+$.now()))}})}var o=!1,r=0,s={act:"login",time:H(),guid:t("MQGUID")||"",suuid:_(),uuid:t("uuid"),cookie:"",bid:"1.1.11",ch:"",url:encodeURIComponent(window.location.href),ext3:0,ext1:6,ext2:D(window.location.href),ext4:"",ext5:1};return{init:function(){e(n)},stopInquiry:function(){clearTimeout(o),r=0}}}(),V=0,q=function(){var e="http://i1.hunantv.com/ui/login/images/",t=[[e+"dialog_1.jpg","#fff"],[e+"dialog_2.jpg","#fff"]],n=Math.round(Math.random()*(t.length-1));$("span[node-type=honey-top-bg]").css("background-image","url("+t[n][0]+")")};e.loginDialog=function(){y||(y=new e.dialog({id:"honey-mini-login-dialog",html:E,content:N,width:620,opacity:.5}),y.init(),y.find("#honey-mini-login-submit").click(M.login),y.find("ul[node-type=honey-mini-third] a").click(s),y.find(".mini-login-yzm").keyup(function(e){var t=e.keyCode?e.keyCode:e.which;if("13"==t){var n=y.find("#honey-mini-login-submit");n.trigger("click")}}),y.find(".login-dialog-password").keyup(function(e){if(!T){var t=e.keyCode?e.keyCode:e.which;if("13"==t){var n=y.find("#honey-mini-login-submit");n.trigger("click")}}}),$.fn.placeholder&&y.find("input").placeholder(),m=y.find("img[node-type=mini-yzm-src]"),$("[action-type=mini-yzm-refresh]").click(function(){m.attr("src",f+$.now())}),m.click(function(){$(this).attr("src",f+$.now())}),y.find("#honey-mini-register").click(F.registe),y.find(".phone-yzm").keyup(function(e){var t=e.keyCode?e.keyCode:e.which;if("13"==t){var n=y.find("#honey-mini-register");n.trigger("click")}}),y.find(".text").blur(function(e){$("#honey-mini-register-error,#honey-mini-login-error").hide()}),d=y.find("#honey-login-loading"));try{if(!n&&window.STK)var n=new window.STK.start;if(n){var i={act:"pv",url:"http://www.mgtv.com/bdsfm/login",ref:window.location.href,bid:isPad?"4.1.1":"1.1.2",cid:window.VIDEOINFO?window.VIDEOINFO.rid:"",plid:window.VIDEOINFO?window.VIDEOINFO.cid:"",vid:window.VIDEOINFO?window.VIDEOINFO.vid:"",ext1:"",ext2:""};n.pageEvent(i,"http://pcweb.v1.mgtv.com/dispatcher.do")}}catch(a){}$.ajax({url:"http://i.mgtv.com/account/loginVerifyStatus",dataType:"jsonp",success:function(e){e&&200==e.code&&"success"==e.msg&&(1==e.data||2==e.data?($("img[node-type=mini-yzm-src]").attr("src",f+$.now()),$(".yzm-mod").show(),T=!0):($("img[node-type=mini-yzm-src]").attr("src",f+$.now()),$(".yzm-mod").hide(),T=!1))}}),c&&c.hide(),d&&d.hide(),"saoma"==I&&P.init(),y.open(),j("#honey-mini-reg-auto","reg"),j("#honey-mini-login-auto","login"),q();var o=t("loginAccount");o&&""!==o&&y.find("#honey-mini-login-auto").val(decodeURIComponent(o))},e.loginCheckDialog=function(t){y.destroy(),y=null;var n="",i=0;if(""==t.data.relate_mobile?(n="绑定",i=0):(n="验证",i=1),!O){O=new e.dialog({id:"honey-mini-login-check-dialog",content:A,width:560,height:320,opacity:.5}),O.init();var a=O.find(".title");if(a.html(n),"624"==t.data.status&&O.find(".merr-tips").html("您本次登录地区为非常用登录地区，请验证手机后登录"),O.find("#login-check-first-btn").click(function(e){O.find(".login-check-dialog-first").hide(),O.find(".login-check-dialog-two").show()}),O.find(".login-check-yzm-btn").attr("hasMobile",i),O.find(".login-check-submit").click(function(){B.check(i,t.data.rtoken)}),""!==t.data.relate_mobile){var o=t.data.relate_mobile,r=o.substring(0,4)+"****"+o.substring(8);O.find("#phone-name").attr({disabled:"true",mobile:t.data.relate_mobile}),O.find("#phone-name").val(r)}}O.open()},h.on("click","li[action-type=honey-mini-login-tabs]",function(e){e.preventDefault();var t=$(this),n=t.attr("type");P.stopInquiry(),"register"==n?($("a.m-saoma-icon").hide(),I="register"):($("a.m-saoma-icon").show(),I="login"),t.siblings().removeClass("current"),t.addClass("current"),m.attr("src",f+$.now()),$(".honey-mini-dialog").hide(),$("div[node-type=honey-mini-box-"+n+"]").show(),$("div.c-union-login-simple").show(),$("div[node-type=honey-mini-dialog-saoma]").hide()}),h.on("click","span[action-type=honey-mini-reg-email]",function(e){var t=$(this);$("p[node-type=mini-register-type]").html("邮箱"),$("input[node-type=honey-mini-reg-name]").attr({placeholder:"请输入邮箱",id:"honey-mini-reg-auto"}).val("").focus(),t.attr("action-type","mini-reg-phone"),t.html("手机注册"),t.attr("type","email"),$("p[node-type=honey-mini-phone-regcode]").hide(),$("p[node-type=honey-mini-reg-pas]").hide(),$("#honey-mini-register-error").hide(),m.attr("src",f+$.now())}),h.on("click","span[action-type=mini-reg-phone]",function(e){var t=$(this);$("p[node-type=mini-register-type]").html("手机"),t.attr("action-type","honey-mini-reg-email"),$("input[node-type=honey-mini-reg-name]").attr({placeholder:"请输入手机号码",id:"honey-mini-type-phone"}).val("").focus(),t.html("邮箱注册"),t.attr("type","phone"),$("p[node-type=honey-mini-phone-regcode]").show(),$("p[node-type=honey-mini-reg-pas]").show(),$("#honey-mini-pass-safe").hide(),m.attr("src",f+$.now())}),h.on("keyup","input[node-type=honey-mini-reg-safe]",function(e){var t=new RegExp("^(?=.{8,})(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\\W).*$","g"),n=new RegExp("^(?![d]+$)(?![a-zA-Z]+$)(?![^da-zA-Z]+$).{6,20}$"),i=new RegExp("(?=.{6,}).*","g"),a=$("em[node-type=honey-mini-line]"),o=$("#honey-mini-pass-safe");$(this).val().length>0?o.slideDown():o.slideUp(),0==i.test($(this).val())?a.removeClass("step"):t.test($(this).val())?(a.removeClass("step"),a.addClass("step")):n.test($(this).val())?(a.removeClass("step"),$("em",o).each(function(e){e>1||$(this).addClass("step")})):(a.removeClass("step"),o.find(".row-line").first().addClass("step"))}),h.on("click","span[action-type=honey-mini-get-pollcode]",function(e){e.preventDefault();var t=$(this),n=60,i=g+"/account/sendRegMobileCode?callback=?",a=$("input[node-type=honey-mini-reg-name]"),o=a.val(),r=$("#honey-mini-register-error"),s=$(".honey-mini-register-yzm");if(""==o)return r.html("手机不能为空").removeClass("ok-ts").show(),void $("input[node-type=honey-mini-reg-name]").focus();if(!S.test(o))return r.html("请输入正确的手机号码").removeClass("ok-ts").show(),a.focus(),!1;if(""==s.val())return r.html("请输入验证码").removeClass("ok-ts").show(),s.focus(),!1;var l={phone:o,vcode:s.val()};if(t.data("lock"))return!1;t.data("lock",!0);var c=setInterval(function(){--n,0==n?(t.html("获取验证码"),clearInterval(c),n=0,t.data("lock",!1)):t.html(""+n+"s")},1e3);$.getJSON(i,l,function(e){e&&200==e.code?r.addClass("ok-ts").html("注册码发送成功").show():(t.data("lock",!1),clearInterval(c),n=0,t.html("获取注册码"),r.html(e.msg).removeClass("ok-ts").show(),m.attr("src",f+$.now()))})}),h.on("click","a.login-check-yzm-btn",function(e){function t(e){l.html(e).removeClass("ok-ts").show()}e.preventDefault();var n=$(this),i=60,a=g+"/account/sendMobileCode?callback=?",o=O.find(".login-check-dialog-two"),r=o.find(".user-phone"),s=r.attr("mobile")?r.attr("mobile"):r.val(),l=O.find(".merr-ts");if(""==$.trim(s))return t("手机号码不能为空"),r.focus(),!1;if(!S.test(s))return t("请输入正确的手机号码"),r.focus(),!1;var c={phone:s,is_relate_mobile:n.attr("hasMobile")};if(n.data("lock"))return!1;n.data("lock",!0);var d=setInterval(function(){--i,0==i?(n.html("获取验证码").removeClass("yzm-b1"),l.hide(),clearInterval(d),i=0,n.data("lock",!1)):(n.html(""+i+"秒后重新获取"),n.addClass("yzm-b1"))},1e3);$.getJSON(a,c,function(e){e&&200==e.code?l.addClass("ok-ts").html("注册码发送成功").show():(n.data("lock",!1),clearInterval(d),i=0,n.html("获取注册码").removeClass("yzm-b1"),t(e.msg))})});var J=!0;h.on("click","a[action-type=honey-mini-reset-email]",function(e){e.preventDefault(),$("li[node-type=honey-mini-register-btn]").attr("type","register"),$("#honey-mini-box-email").hide(),$("#honey-mini-box-register").show(),$("em[action-type=honey-mini-reset-send]").html("重新发送").addClass("ico-re"),m.attr("src",f+$.now()),J=!0}),h.on("click","em[action-type=honey-mini-reset-send]",function(e){var t=$("em[node-type=honey-mini-email-name]").html(),n=$(this),i=g+"/account/resendRegEmail?callback=?";return J?void $.getJSON(i,{email:t},function(e){J=!1,e&&200==e.code?(n.html("发送成功").addClass("ico-ok"),setTimeout(function(){n.html("重新发送").removeClass("ico-ok").addClass("ico-re"),J=!0},4e3)):(J=!1,n.html(e.msg).removeClass("ico-ok ico-re"))}):!1}),h.on("click touchstart","a.m-saoma-icon",function(e){e.preventDefault(),P.init();var t=$("div[node-type=honey-mini-dialog-saoma]"),n=$("div[node-type=honey-mini-box-login]"),i=$("div.c-union-login-simple");$(this).hide(),i.hide(),n.hide(),t.show(),I="saoma"}),h.on("click touchstart","a.m-back-login",function(e){e.preventDefault();var t=$("a.m-saoma-icon"),n=$("div[node-type=honey-mini-dialog-saoma]"),i=$("div[node-type=honey-mini-box-login]"),a=$("div.c-union-login-simple");t.show(),a.show(),i.show(),n.hide(),I="login",P.stopInquiry()}),h.on("click touchstart",".m-repeat-image-bg, .m-repeat-image-intro",function(e){e.preventDefault(),P.init()}),h.on("click touchstart",".honey-dialog-destroy",function(){return y&&y.close(),O&&(O.destroy(),O=null),P.stopInquiry(),!1})}),this.JSON||(this.JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,a,o,r,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,n=0;o>n;n+=1)r[n]=str(n,l)||"null";return a=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+s+"]":"["+r.join(",")+"]",gap=s,a}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)i=rep[n],"string"==typeof i&&(a=str(i,l),a&&r.push(quote(i)+(gap?": ":":")+a));else for(i in l)Object.hasOwnProperty.call(l,i)&&(a=str(i,l),a&&r.push(quote(i)+(gap?": ":":")+a));return a=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+s+"}":"{"+r.join(",")+"}",gap=s,a}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,a=e[t];if(a&&"object"==typeof a)for(n in a)Object.hasOwnProperty.call(a,n)&&(i=walk(a,n),void 0!==i?a[n]=i:delete a[n]);return reviver.call(e,t,a)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e){function t(){try{return s in e&&e[s]}catch(t){return!1}}function n(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(a),c.appendChild(a),a.addBehavior("#default#userData"),a.load(s);var n=e.apply(o,t);return c.removeChild(a),n}}function i(e){return e.replace(/^d/,"___$&").replace(h,"___")}var a,o={},r=e.document,s="localStorage",l="script";if(o.disabled=!1,o.set=function(e,t){},o.get=function(e){},o.remove=function(e){},o.clear=function(){},o.transact=function(e,t,n){var i=o.get(e);null==n&&(n=t,t=null),"undefined"==typeof i&&(i=t||{}),n(i),o.set(e,i)},o.getAll=function(){},o.forEach=function(){},o.serialize=function(e){return JSON.stringify(e)},o.deserialize=function(e){if("string"!=typeof e)return void 0;try{return JSON.parse(e)}catch(t){return e||void 0}},t())a=e[s],o.set=function(e,t){return void 0===t?o.remove(e):(a.setItem(e,o.serialize(t)),t)},o.get=function(e){return o.deserialize(a.getItem(e))},o.remove=function(e){a.removeItem(e)},o.clear=function(){a.clear()},o.getAll=function(){var e={};return o.forEach(function(t,n){e[t]=n}),e},o.forEach=function(e){for(var t=0;t<a.length;t++){var n=a.key(t);e(n,o.get(n))}};else if(r.documentElement.addBehavior){var c,d;try{d=new ActiveXObject("htmlfile"),d.open(),d.write("<"+l+">document.w=window</"+l+'><iframe src="/favicon.ico"></iframe>'),d.close(),c=d.w.frames[0].document,a=c.createElement("div")}catch(u){a=r.createElement("div"),c=r.body}var h=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");o.set=n(function(e,t,n){return t=i(t),void 0===n?o.remove(t):(e.setAttribute(t,o.serialize(n)),e.save(s),n)}),o.get=n(function(e,t){return t=i(t),o.deserialize(e.getAttribute(t))}),o.remove=n(function(e,t){t=i(t),e.removeAttribute(t),e.save(s)}),o.clear=n(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(s);for(var n,i=0;n=t[i];i++)e.removeAttribute(n.name);e.save(s)}),o.getAll=function(e){var t={};return o.forEach(function(e,n){t[e]=n}),t},o.forEach=n(function(e,t){for(var n,i=e.XMLDocument.documentElement.attributes,a=0;n=i[a];++a)t(n.name,o.deserialize(e.getAttribute(n.name)))})}try{var p="__storejs__";o.set(p,p),o.get(p)!=p&&(o.disabled=!0),o.remove(p)}catch(u){o.disabled=!0}o.enabled=!o.disabled,"undefined"!=typeof module&&module.exports&&this.module!==module?module.exports=o:"function"==typeof define&&define.amd?define(o):e.store=o}(Function("return this")()),honey.def("plugin:jquery.autocomplete, mod:search.statistics",function(e){"use strict";var t,n=window.KEYWORD||"",i="http://s5.hunantv.com",a="",o=null,r=null,s="http://log.so.hunantv.com/report?",l=new Image,c=function(){return window.USER&&window.USER.data&&window.USER.data.uid?window.USER.data.uid:""},d=function(e,t){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)||/MSIE(\d+\.\d+);/.test(navigator.userAgent)){var n=document.createElement("a");n.href=e,t&&(n.target="_blank"),document.body.appendChild(n),n.click()}else t?window.open(e,"_blank"):location.href=e},u=function(){};u.prototype.init=function(){var e=this;e.sform=$(".c-header-search-form"),e.sinput=$(".c-header-search-text"),e.sbtn=$(".c-header-search-btn"),e.bindEvent(),e.autoFocus(),e.autoComplete();var t=PAGE_DATA?PAGE_DATA.cid||0:0;$.getJSON(i+"/recommend?platform=pcweb&fstlvlId="+t+"&callback=?",function(i){i&&i.data&&i.data["default"]&&i.data["default"][t]&&i.data["default"][t][0]&&(n=i.data["default"][t][0],e.sinput.is(":focus")||(e.sinput.val(n),$(window).trigger("header.search.mounted")))})},u.prototype.goToUrl=function(e){var n=$.now();t&&1e3>n-t||(t=n,/so\.mgtv/.test(window.location.href)?d(e,!1):d(e,!0))},u.prototype.bindEvent=function(){var e=this;e.sinput.on("input",function(){a=e.sinput.val()}),e.sform.submit(function(e){return e.preventDefault(),!1})},u.prototype.autoFocus=function(){var e=this,t=function(e,t){var i=$(e),a=i.val(),o=a===n;t&&o&&i.val(null),t||a||i.val(n)};e.sinput.focus(function(){t(this,!0)}).blur(function(){t(this,!1)}).val(n)},u.prototype.autoComplete=function(){var e=this,t=e.sinput,n=function(){var n=t.val();if(n){$(document).trigger("before.search",{word:n});var i="http://so.mgtv.com/so/k-"+n;e.goToUrl(i)}},d={triggerSelectOnValidInput:!1,cookieName:"search-history",serviceUrl:i+"/suggest",containerClass:".c-header-search",wrapperClass:".c-header-search-list",suggestList:".c-header-search-list-hot",historyList:".c-header-search-list-history",whenNoHistory:".c-header-search-list-title, .c-header-search-list-history, .c-header-search-list-empty",emptyHistory:".c-header-search-list-empty",minChars:0,zIndex:1099,width:"auto",paramName:"q",dataType:"JSONP",transformResult:function(e){var e={suggestions:$.map(e.data,function(e,t){return{recently:e.recently,value:e.title,data:t}})};return e},onEnter:function(){var i={act:"search",input:a,has:r||o.suggestions.length>0?1:0,suggest:r?r.value:"",suggestidx:r?r.data+1:"",page:1,query:r?r.value:t.val(),_client:"web",hw:0,h:r&&r.isHistory?"1":"0",v5:1,sobox:1,iscorr:0,related:0,relatedstar:0,isrank:0,plugin:0,hot:0,lastest:0,ty:0,du:0,pt:0,uuid:c(),t:+new Date};return e.reportTimer=setTimeout(function(){l.src=s+$.param(i),r=null},200),n(),!1},onSelect:function(e){r=e}},u=d;u.appendTo=$(".c-header-search-list");var h=t.autocomplete(u);o=h.length?h[0]:null,e.sbtn.click(function(i){e.reportTimer&&clearTimeout(e.reportTimer);var a={act:"search",input:t.val(),has:o.suggestions.length>0?1:0,suggest:"",suggestidx:"",page:1,query:t.val(),_client:"web",hw:0,h:0,v5:1,sobox:1,iscorr:0,related:0,relatedstar:0,isrank:0,plugin:0,hot:0,lastest:0,ty:0,du:0,pt:0,uuid:c(),t:+new Date};return l.src=s+$.param(a),i.preventDefault(),n(),!1})},e.search=new u}),honey.def("lib:jquery, lib:mustache",function(e){"use strict";var t=!1,n=[{hasUnread:!1,unread:0},{hasUnread:!1,unread:0},{hasUnread:!1,unread:0},{hasUnread:!1,unread:0}];e.msgCenterTpl={msgList:'<ul class="c-header-msg-tab">                        <li class="{{#showComment}}on{{/showComment}} {{#hasNewComment}}u-pop{{/hasNewComment}}" data-type="1">评论<em></em><i>{{newComment}}</i></li>                        <li class="{{#showZan}}on{{/showZan}} {{#hasNewZan}}u-pop{{/hasNewZan}}" data-type="2">赞<em></em><i>{{newZan}}</i></li>                        <li class="{{#showMember}}on{{/showMember}} {{#hasNewMember}}u-pop{{/hasNewMember}}" data-type="3">会员<em></em><i>{{newMember}}</i></li>                        <li class="{{#showSystem}}on{{/showSystem}} {{#hasNewSystem}}u-pop{{/hasNewSystem}}" data-type="4">系统<em></em><i>{{newSystem}}</i></li>                    </ul>                    {{#needLogin}}                        <p class="c-header-msg-null">您还没有登录，<a class="js-login-btn" href="javascript:void(0)">登录</a>后可查看所有消息</p>                    {{/needLogin}}                    {{^needLogin}}                    {{#showComment}}                        {{#isNull}}<p class="c-header-msg-null">还没有收到任何消息</p>{{/isNull}}<ul class="c-header-msg-list">                        {{#items}}                            <li class="c-header-msg-reply">                                <a class="u-event" href="http://i.mgtv.com/my/message?type=1" target="_blank">                                    <span class="u-name">{{accountName}}</span>                                    <span class="u-action">回复了你</span>                                    <span class="u-desc">{{reply}}</span>                                </a>                                <span class="u-do">                                    <a class="u-reply" href="http://www.mgtv.com/s/{{vid}}.html?commentid={{commentId}}">回复</a>                                </span>                                <em class="u-time">{{time}}</em>                            </li>                        {{/items}}                    </ul>{{/showComment}}                    {{#showZan}}                        {{#isNull}}<p class="c-header-msg-null">还没有收到任何消息</p>{{/isNull}}<ul class="c-header-msg-list">                        {{#items}}                            <li class="c-header-msg-approve">                                <a class="u-event" href="http://i.mgtv.com/my/message?type=2" target="_blank">                                    <span class="u-name">{{accountName}}</span>                                    <span class="u-desc">赞了你的评论</span>                                </a>                                <em class="u-time">{{time}}</em>                            </li>                        {{/items}}                    </ul>{{/showZan}}                    {{#showMember}}                        {{#isNull}}<p class="c-header-msg-null">还没有收到任何消息</p>{{/isNull}}<ul class="c-header-msg-list">                        {{#items}}                        <li class="c-header-msg-member" data-id="{{id}}">                            <a class="u-info" href="http://i.mgtv.com/my/message?type=3" target="_blank">                                <span class="u-title">{{title}}</span>                                <span class="u-desc">{{content}}</span>                            </a>                            <em class="u-time">{{time}}</em>                        </li>                        {{/items}}                    </ul>{{/showMember}}                    {{#showSystem}}                        {{#isNull}}<p class="c-header-msg-null">还没有收到任何消息</p>{{/isNull}}                        <ul class="c-header-msg-list">                        {{#items}}                        <li class="c-header-msg-system" data-id="{{id}}">                            <a class="u-info" href="http://i.mgtv.com/my/message?type=4" target="_blank">                                <span class="u-title">{{title}}</span>                                <span class="u-desc">{{content}}</span>                            </a>                            <em class="u-time">{{time}}</em>                        </li>                        {{/items}}                    </ul>{{/showSystem}}                    <div class="c-header-msg-more">                        <a class="u-allmsg" href="http://i.mgtv.com/my/message" target="_blank">全部消息</a>                    </div>                    {{/needLogin}}',
msgLoading:'<p class="c-header-msg-null"><i class="c-header-icon c-header-icon-loading"></i>正在加载</p>'};var i=function(){var e="http://courier.person.mgtv.com";this.unreadCntUrl=e+"/message/poll?",this.msgUrl=e+"/message/getList?",this.t=null,this.hasInit=!1};i.prototype.init=function(t){var n=this,t=t||{};if(n.tpl=e.msgCenterTpl,n.box=$("#honey-header-msg"),n.noteMsg=$(".c-header-msg-lucky"),n.sysMsg=$(".c-header-msg-ac"),n.trigger=$("#honey-header-msg .c-header-panel-floattg"),n.UNREAD_MSG_LOOP=t.refresh||3600,n.bindEvent(),o()){var i=this;i.afterUserReady.call(i)}else{var i=this;i.userTimer=setTimeout(function(){o()&&!i.hasInit&&i.afterUserReady.call(i)},500)}n.box.removeClass("c-header-panel-mod-active")},i.prototype.bindEvent=function(){var n=this,i=$(document);n.box.on("mouseenter",".c-header-msg",function(){n.t&&clearTimeout(n.t)}),n.box.on("mouseleave",".c-header-msg",function(){n.t&&clearTimeout(n.t),n.t=setTimeout(function(){n.box.removeClass("c-header-panel-mod-active")},200)}),n.box.on("click",".js-login-btn",function(){return e.loginDialog(),!1}),n.box.on("click",".c-header-msg-tab li",function(){var e=($(this).index(),$(this).data("type"));return n.lastShowType=e,o()?(n.getUnreadCnt(function(){n.getUserMsg(e)}),!1):(n.renderMsgPanel({type:e,messageList:[],needLogin:!0}),!1)}),n.trigger.mouseenter(function(){n.t&&clearTimeout(n.t),t&&n.box.addClass("c-header-panel-mod-active");try{if(!n.DATAREPORT&&window.STK&&(n.DATAREPORT=new window.STK.start),n.DATAREPORT){var e={act:"pv",url:"http://www.mgtv.com/bdsfm/message",ref:window.location.href,bid:"1.1.2",cid:window.VIDEOINFO&&window.VIDEOINFO.rid?window.VIDEOINFO.rid:window.PAGE_DATA&&window.PAGE_DATA.cid?window.PAGE_DATA.cid:"",plid:window.VIDEOINFO&&window.VIDEOINFO.cid?window.VIDEOINFO.cid:"",vid:window.VIDEOINFO&&window.VIDEOINFO.vid?window.VIDEOINFO.vid:"",ext1:"",ext2:""};n.DATAREPORT.pageStart(e)}}catch(i){}return o()?(n.renderMsgPanel({type:n.lastShowType||1,messageList:[],needLogin:!1,loading:!0}),n.getUnreadCnt(function(){n.getUserMsg(n.lastShowType||1)}),!1):(n.renderMsgPanel({type:n.lastShowType||1,messageList:[],needLogin:!0}),!1)}),n.trigger.mouseleave(function(){n.t&&clearTimeout(n.t),n.t=setTimeout(function(){n.box.removeClass("c-header-panel-mod-active")},200)}),i.on("HONEY-LOGIN-DONE",function(){n.afterUserReady()}),i.on("HONEY-LOGIN-SUCCESS",function(){n.afterUserReady()})},i.prototype.renderMsgPanel=function(e){var i=this,a="",o=e.loading,s=e.type,l=e.messageList,c=0,d=i.box.find(".c-header-panel-floattg em");if(i.box.addClass("c-header-panel-mod-active"),o)a=i.tpl.msgLoading,i.box.find(".c-header-msg").html(a).show();else{for(var u=((new Date).getTime(),[]),h=0;h<l.length;h++){var p=1e3*l[h].sendTime;l[h].content=$("<div>"+l[h].content+"</div>").text(),l[h].time=r(new Date(p)),0==l[h].readStatus&&(l[h].isNew=!0)}u=l.slice(0,3),n[s-1]={hasUnread:!1,unread:0};var a=Mustache.render(i.tpl.msgList,{needLogin:e.needLogin,showComment:1==s,showZan:2==s,showMember:3==s,showSystem:4==s,hasNewComment:n[0].hasUnread,hasNewZan:n[1].hasUnread,hasNewMember:n[2].hasUnread,hasNewSystem:n[3].hasUnread,newComment:n[0].unread,newZan:n[1].unread,newMember:n[2].unread,newSystem:n[3].unread,isNull:u.length<1,items:u,unread:n});i.box.find(".c-header-msg").html(a),c=n[0].unread+n[1].unread+n[2].unread+n[3].unread,c>0?d.css({visibility:"visible"}):d.css({visibility:"hidden"})}t=!0},i.prototype.getUnreadCnt=function(e){var t,i,r,s=this,l=0,c=s.box.find(".c-header-panel-floattg em");t={uuid:o(),ticket:a("HDCN").split("-")[0],from:1,cookie:a("__STKUUID")},$.getJSON(this.unreadCntUrl+$.param(t)+"&callback=?",function(t){if(t&&200==t.code&&t.data){for(s.UNREAD_MSG_LOOP=+t.data.interval,r=t.data.messageList,n=[{hasUnread:!1,unread:0},{hasUnread:!1,unread:0},{hasUnread:!1,unread:0},{hasUnread:!1,unread:0}],i=0;i<r.length;i++)l+=r[i].unread,r[i].type&&(n[r[i].type-1]={hasUnread:r[i].unread>0,unread:r[i].unread});l>0?c.css({visibility:"visible"}):c.css({visibility:"hidden"})}else c.css({visibility:"hidden"});e&&e()})},i.prototype.getUserMsg=function(e,t,n){var i=this,r={uuid:o(),ticket:a("HDCN").split("-")[0],from:1,cookie:a("__STKUUID"),messageType:e||"1",pageNo:t||1,pageSize:n||5};$.getJSON(this.msgUrl+$.param(r)+"&callback=?",function(t){t&&200==t.code&&t.data&&i.renderMsgPanel({type:e,messageList:t.data.messageList})})},i.prototype.afterUserReady=function(){var e=this;e.hasInit=!0,e.userTimer&&clearTimeout(e.userTimer),e.getUnreadCnt(),e.msgLoop()},i.prototype.msgLoop=function(){var e=this,t=1;setInterval(function(){t%e.UNREAD_MSG_LOOP==0&&e.getUnreadCnt(),t++},1e3)};var a=function(e){var t=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),n=document.cookie.match(t);return n?n[1]:""},o=function(){return window.USER&&window.USER.data&&window.USER.data.uid?window.USER.data.uid:!1},r=function(e){var t,n=Math.round((+new Date-e)/1e3),i=new Date,a=60,o=60*a,r=24*o,s=365*r;return t=30>n?"刚刚":a>n?n+"秒前":2*a>n?"1分钟前":o>n?Math.floor(n/a)+" 分钟前":1==Math.floor(n/o)?"1小时前":r>n?Math.floor(n/o)+"小时前":2*r>n?"昨天":4*r>n?Math.floor(n/r)+" 天前":1*s>n&&e.getFullYear()==i.getFullYear()?e.getMonth()+1+"月"+e.getDate()+"日":e.getFullYear()+"年"+(e.getMonth()+1)+"月"+e.getDate()+"日"};e.msgCenter=new i}),honey.def("lib:mustache",function(e){e.watchRecordTpl={none:'<p class="c-header-record-null"><i></i>暂无观看记录哦！</p>',list:'<ul class="c-header-record-list">            {{#items}}                <li>                    <a class="u-title" href="{{url}}?refer=i1&start_time={{time}}">{{video_name}}</a>                    <span class="u-progress"><i class="c-header-icon c-header-icon-{{classes}} "></i><b>{{video_watched_time}}</b></span>                    <span class="u-do">                      {{#notOver}}                        <a class="u-goon" href="{{url}}?refer=i1&start_time={{time}}" vid="{{video_id}}" target="_blank"><i class="c-header-icon"></i>继续看</a>                      {{/notOver}}                      {{#isOver}}                        <a class="u-replay" href="{{url}}?refer=i1&start_time=0" target="_blank"><i class="c-header-icon"></i>重播</a>                      {{/isOver}}                      {{#next_video_url}}                        <a class="u-next" href="{{next_video_url}}?refer=i1&start_time=0" target="_blank"><i class="c-header-icon"></i>下一集</a>                      {{/next_video_url}}                    </span>                    <a class="u-delete" href="javascript:void(0)" vid="{{video_id}}"><i class="c-header-icon"></i>删除</a>                </li>            {{/items}}        </ul>        <div class="c-header-record-more">            <a class="u-all" href="http://i.mgtv.com/my/watch" target="_blank">查看全部</a>            <a class="u-empty" href="javascript:void(0)"><i class="c-header-icon"></i>清空</a>        </div>'}}),honey.def("lib:jquery, lib:mustache, tpl:watch.record",function(e){"use strict";var t=!0,n=!1,i=function(){var e="http://u.api.mgtv.com/user";this.watchUrl=e+"/watch_record?callback=?",this.delWatchUrl=e+"/remove_watch_record?callback=?",this.delAllWatchUrl=e+"/destroy_watch_record?callback=?",this.t=null,this.DATAREPORT=null};i.prototype.init=function(){var t=this;t.tpl=e.watchRecordTpl,t.wrapper=$("#honey-header-record"),t.box=t.wrapper.find(".c-header-record"),t.trigger=t.wrapper.find(".c-header-panel-floattg"),t.user=window.USER||{code:-101,data:null},t.bindEvent()},i.prototype.updateUser=function(){this.user=window.USER||{code:-101,data:null}},i.prototype.bindEvent=function(){var n=this,i=$(document);i.on("HONEY-LOGIN-DONE",function(){n.updateUser.call(n)}),n.wrapper.on("mouseenter",".c-header-record",function(){n.t&&clearTimeout(n.t)}),n.wrapper.on("mouseleave",".c-header-record",function(){n.t&&clearTimeout(n.t),n.t=setTimeout(function(){n.wrapper.removeClass("c-header-panel-mod-active")},200)}),n.box.on("click",".u-delete",function(t){t.preventDefault();var i=$(this),a=~~i.attr("vid");if(6!=e.ie&&200!==n.user.code&&window.store){var o=[],r=window.store.get("honey-rec");return $.each(r,function(e,t){t.video_id!==a&&o.push(t)}),window.store.set("honey-rec",o),i.parent().remove(),n.box.find("li").length||n.clearAll(),!1}$.getJSON(n.delWatchUrl,{video_id:a},function(){i.parent().remove(),n.box.find("li").length||n.clearAll()})}),n.box.on("click",".u-empty",function(e){e.preventDefault(),n.clearAll()}),n.trigger.mouseenter(function(){n.t&&clearTimeout(n.t),n.wrapper.addClass("c-header-panel-mod-active");try{if(!n.DATAREPORT&&window.STK&&(n.DATAREPORT=new window.STK.start),n.DATAREPORT){var i={act:"pv",url:"http://www.mgtv.com/bdsfm/playlist",ref:window.location.href,bid:"1.1.2",cid:window.VIDEOINFO&&window.VIDEOINFO.rid?window.VIDEOINFO.rid:window.PAGE_DATA&&window.PAGE_DATA.cid?window.PAGE_DATA.cid:"",plid:window.VIDEOINFO&&window.VIDEOINFO.cid?window.VIDEOINFO.cid:"",vid:window.VIDEOINFO&&window.VIDEOINFO.vid?window.VIDEOINFO.vid:"",ext1:"",ext2:""};n.DATAREPORT.pageStart(i)}}catch(a){}if(6!=e.ie&&200!==n.user.code&&window.store){var o=window.store,i=o.get("honey-rec")||[];return n.renderWatchPanel({code:200,data:i}),!1}return t&&$.getJSON(n.watchUrl,function(e){n.renderWatchPanel(e),t=!1}),!1}),n.trigger.mouseleave(function(){n.t&&clearTimeout(n.t),n.t=setTimeout(function(){n.wrapper.removeClass("c-header-panel-mod-active")},200)})},i.prototype.clearAll=function(){var e=this;return 200!==e.user.code&&window.store?(window.store.clear(),void e.renderWatchPanel({data:[]})):void $.getJSON(e.delAllWatchUrl,function(t){t&&200==t.code&&e.renderWatchPanel({data:[]})})},i.prototype.renderWatchPanel=function(e){for(var t,i=this,a=0,o=e.data.slice(0,5),r=e.data.length?i.tpl.list:i.tpl.none,a=0;a<o.length;a++)o[a].video_watched_time=o[a].video_watched_time||o[a].watchTime,o[a].classes="3"==o[a].from?"pad":"2"==o[a].from?"phone":"4"==o[a].from?"tv":"pc","已看完"==o[a].video_watched_time||"已观看100%"==o[a].video_watched_time?(o[a].isOver=!0,o[a].notOver=!1):(o[a].isOver=!1,o[a].notOver=!0);t=Mustache.render(r,{logined:200==i.user.code,items:o}),i.box.html(t),n=!0},e.watchRecord=new i}),honey.def("lib:mustache",function(e){e.headerUserTpl={menu:'<div class="panel">{{^islogin}}<a class="c-header-login c-header-panel-link" href="javascript:void(0)">登录</a> <a class="c-header-register c-header-panel-link" href="http://i.mgtv.com/account/login?type=register&from='+encodeURIComponent(window.location.href)+'" target="_blank">注册</a>{{/islogin}}{{#islogin}}<a class="c-header-avt" href="http://i.mgtv.com/"><img src="{{user.avatar}}" alt="{{user.nickname}}"></a>{{/islogin}}</div>',panel:'<div class="c-header-panel-floatbox c-header-user">            <div class="c-header-user-info">                <a class="u-avt" href="http://i.mgtv.com" target="_blank">                    <img src="{{user.avatar}}" alt="">                    {{#user.isValidated}}<i class="inactivated"></i>{{/user.isValidated}}                    {{#user.isJinYong}}<i class="disabled"></i>{{/user.isJinYong}}                </a>                <a class="u-name" href="http://i.mgtv.com" target="_blank"><b>{{user.nickname}}</b><i class="{{user.vip}}"></i></a>                <span class="u-vipstatus {{#user.vipInfoColor}}{{user.vipInfoColor}}{{/user.vipInfoColor}}">                    {{#user.vipInfo}}{{user.vipInfo}}{{/user.vipInfo}}                    {{#user.vipTime}}<i class="vip-expire-time">{{user.vipTime}}</i>{{/user.vipTime}}                </span>                {{#user.vipActName}}<a class="u-vipbtn" href="{{user.vipActUrl}}" target="_blank" {{#user.hideBtn}}style="display:none;"{{/user.hideBtn}}>{{user.vipActName}}</a>{{/user.vipActName}}                {{#user.userInfo}}<span class="u-status">{{user.userInfo}}</span>{{/user.userInfo}}            </div>            <div class="c-header-user-box">                <table>                    <tr>                        <td><a class="u-homepage" href="http://i.mgtv.com" target="_blank"><i></i>主页</a></td>                        <td><a class="u-setting" href="http://i.mgtv.com/my/setting" target="_blank"><i></i>设置</a></td>                    </tr>                    <tr>                        <td><a class="u-vipclub" href="http://www.mgtv.com/vip" target="_blank"><i></i>会员中心</a></td>                        <td><a class="u-ticket" href="http://i.mgtv.com/my/card" target="_blank"><i></i>卡券</a></td>                    </tr>                </table>            </div>            <a class="c-header-user-loginout" href="{{logout_url}}">退出</a>        </div>'}}),honey.def("lib:jquery, lib:mustache, tpl:header.userinfo",function(e){"use strict";var t=function(){this.menu_render=!1,this.panel_render=!1,this.t_render=null,this.t=null,this.len=function(e){return e.replace(/[^\x00-\xff]/g,"xx").length}};t.prototype.init=function(t){var n=this;n.opt=t||{},n.tpl=e.headerUserTpl,n.box=$("#honey-header-user"),void 0===window.USER||n.menu_render||(n.t_render=setTimeout(function(){n.renderMenu.call(n)},500)),n.bindEvent()},t.prototype.bindEvent=function(){var t=this,n=$(document);n.on("HONEY-LOGIN-DONE",function(){t.renderMenu()}),n.on("HONEY-LOGIN-ERR",function(){t.renderMenu()}),t.box.on("click","a.c-header-login",function(){e.loginDialog?e.loginDialog():window.location.href="http://i.mgtv.com/account/login"}),t.box.on("mouseenter","a.c-header-avt",function(){t.t&&clearTimeout(t.t);var e=$(this).offset().left;t.renderUserPanel(e)}),t.box.on("mouseleave","a.c-header-avt",function(){t.t&&clearTimeout(t.t),t.t=setTimeout(function(){t.box.removeClass("c-header-panel-mod-active")},200)}),t.box.on("mouseenter",".c-header-user",function(){t.t&&clearTimeout(t.t)}),t.box.on("mouseleave",".c-header-user",function(){t.t&&clearTimeout(t.t),t.t=setTimeout(function(){t.box.removeClass("c-header-panel-mod-active")},200)})},t.prototype.renderMenu=function(){var t=this,n=window.USER||{code:-101,data:null};t.t_render&&clearTimeout(t.t_render);var i=Mustache.render(e.headerUserTpl.menu,{islogin:200===~~n.code,user:n.data});t.box.html(i),t.menu_render=!0,t.user=n},t.prototype.renderUserPanel=function(){var e=this,t=e.tpl.panel;if(e.user&&200===~~e.user.code){try{if(!e.DATAREPORT&&window.STK&&(e.DATAREPORT=new window.STK.start),e.DATAREPORT){var n={act:"pv",url:"http://www.mgtv.com/bdsfm/uc",ref:window.location.href,bid:"1.1.2",cid:window.VIDEOINFO&&window.VIDEOINFO.rid?window.VIDEOINFO.rid:window.PAGE_DATA&&window.PAGE_DATA.cid?window.PAGE_DATA.cid:"",plid:window.VIDEOINFO&&window.VIDEOINFO.cid?window.VIDEOINFO.cid:"",vid:window.VIDEOINFO&&window.VIDEOINFO.vid?window.VIDEOINFO.vid:"",ext1:"",ext2:""};e.DATAREPORT.pageStart(n)}}catch(i){}if(e.panel_render)return void e.box.addClass("c-header-panel-mod-active");var a=window.location.href,o=a.substring(0,a.indexOf("#")),r=""==o?a:o,s=$.extend(!0,{avatar:"http://img.hunantv.com/imgotv-member/user/avt.jpg"},e.user.data),l="http://order.mgtv.com/pay/pc/index.html?ftype=8&clocation=0",c="http://order.mgtv.com/pay/pc/index.html?ftype=8&clocation=6";if(0==s.group?(s.isValidated=1,s.userInfo="账号未激活",s.hideBtn=1):2==s.isband?(s.isJinYong=1,s.userInfo="账号已禁用",s.hideBtn=0):(s.isJinYong=0,s.isValidated=0,s.hideBtn=0),1==s.isvip)1==s.vip_id?s.vipInfo="pc移动影视会员有效期":2==s.vip_id?s.vipInfo="全屏影视会员有效期":s.vipInfo="会员有效期",s.vip="u-vip",s.vipTime=s.vipExpiretime,s.vipActName="立即续费",s.vipActUrl=c,s.vipInfoColor="";else if(2==s.isvip){var d=-s.vipLeft;s.vip="",s.vipTime="",s.vipInfo="会员已过期"+d+"天",s.vipInfoColor="expire",16>d?(s.vipActName="立即续费",s.vipInfo="会员已过期"+d+"天",s.vipActUrl=c):(s.vipActName="开通会员",s.vipInfo="",s.vipActUrl=l)}else 3==s.isvip&&(s.vip="",s.vipTime="",s.vipActUrl=l,s.vipActName="开通会员",s.vipInfo="",s.vipInfoColor="");s.isOffical&&(s.vip="u-official",s.vipTime="",s.vipActName="",s.vipInfo="",s.vipInfoColor="");var u=Mustache.render(t,{user:s,logout_url:function(){return"http://i.mgtv.com/account/logout?from="+encodeURIComponent(r)}});e.box.append(u),e.box.addClass("c-header-panel-mod-active"),e.panel_render=!0}},e.headerUser=new t}),honey.def("lib:mustache",function(e){var t=function(e){this.downloadTimer=null,this.scrollTimer=null,this.scrollThreshold=5,this.fixClass="c-header-fix",this.header=$("#honey-header"),this.download=$("#honey-header-download"),this.feed=$("#header-feed"),this.opt=e||{},this.navTpl='{{#items}}<li data-fstlvlid="{{fstlvlId}}" data-type="{{pageType}}">                        <a href="{{url}}" class="{{#isCurrent}}on{{/isCurrent}}" >{{title}}</a></li>{{/items}}',this.init(e)};t.prototype.init=function(){this.getNav(),honey.search.init(),honey.headerUser.init(),honey.watchRecord.init(),honey.msgCenter.init(),this.bindEvent()},t.prototype.getNav=function(){var e,t,n,i,a=this;i=window.PAGE_DATA?window.PAGE_DATA.cid:-1,t={version:"5.0",type:"4",pageSize:"999"},$.ajax({url:"http://pc.bz.mgtv.com/odin/c1/channel/list?"+$.param(t),type:"GET",dataType:"jsonp",jsonpCallback:"mgtvcallback_cl",success:function(t){if(t&&t.data&&t.data.length>0){for(a.navs=t.data,n=0;n<a.navs.length;n++)"0"==a.navs[n].pageType&&(a.header.find(".c-header-logo").attr("href",a.navs[n].url),a.header.find(".c-header-qcmenu a").eq(0).attr("href",a.navs[n].url)),"88"==a.navs[n].pageType&&a.header.find(".c-header-vip").attr("href",a.navs[n].url),a.navs[n].pageType==i&&(a.navs[n].isCurrent=!0),a.header.hasClass("c-header-lv2")||a.header.hasClass("c-header-lv1-extend")?"0"==a.navs[n].pageType&&a.navs.splice(n,1):"88"==a.navs[n].pageType&&a.navs.splice(n,1);if($("#honey-header").hasClass("c-header-lv1-extend")){var o=Math.ceil(a.navs.length/5);a.navs.length%5!=0;for(n=a.navs.length;5*o>n;n++)a.navs.push({url:"javascript:void(0);"})}e=Mustache.render(a.navTpl,{items:a.navs}),$(".c-header-channel ul").html(e)}}})},t.prototype.bindEvent=function(){var e=this,t=$(window),n=$(document),i=0,a={},o=0,r=0,s=n.scrollTop();t.scroll(function(l){clearTimeout(e.scrollTimer),e.scrollTimer=setTimeout(function(){r=n.scrollTop(),i=r-s,o=i>e.scrollThreshold?1:i<-e.scrollThreshold?-1:0,a={direction:o,position:r,originEvent:l},t.trigger("scrollEndEx",a),e.onScrollEnd(a),s=r},200)}),e.feed.on("mouseenter",function(t){e.feed.addClass("c-header-panel-mod-active")}),e.feed.on("mouseleave",function(t){e.feed.removeClass("c-header-panel-mod-active")}),e.download.on("mouseenter",".c-header-panel-floattg, .c-header-download",function(){e.downloadTimer&&clearTimeout(e.downloadTimer),e.download.addClass("c-header-panel-mod-active")}),e.download.on("mouseleave",".c-header-panel-floattg, .c-header-download",function(){e.downloadTimer&&clearTimeout(e.downloadTimer),e.downloadTimer=setTimeout(function(){e.download.removeClass("c-header-panel-mod-active")},200)}),e.header.on("mouseenter",".c-header-menutg, #honey-header-float-menu",function(){e.menuTimer&&clearTimeout(e.menuTimer),e.header.find("#honey-header-float-menu").show()}),e.header.on("mouseleave",".c-header-menutg, #honey-header-float-menu",function(){e.menuTimer&&clearTimeout(e.menuTimer),e.menuTimer=setTimeout(function(){e.header.find("#honey-header-float-menu").hide()},200)})},t.prototype.onScrollEnd=function(e){if(window.PAGE_DATA&&window.PAGE_DATA.fixHeader)return!1;if($("#honey-header").hasClass("c-header-lv2"))return!1;if(-1==e.direction&&e.position>600){if(this.header.hasClass(this.fixClass))return;this.header.addClass(this.fixClass),this.header.css({top:"-122px"}),this.header.animate({top:0},500),$("body").css({marginTop:"132px"})}else this.header.removeClass(this.fixClass),$("body").css({marginTop:"0px"})},e.header=new t});