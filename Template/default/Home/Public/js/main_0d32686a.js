!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){return t(e)}:t(e)}("undefined"!=typeof window?window:this||{},function(e,t){function n(e,t,n){function r(r){var c={vshow:["http://pc.videoclick.baidu.com/u.gif?pid=104&tpl=bdvadmlog&stp=visible&bl="+r.id],show:[],click:[],start:[],request:[]};o.shim(c).keys().forEach(function(e){"string"==typeof r[e]?c[e].push(r[e]):"[object Array]"===Object.prototype.toString.call(r[e])&&(c[e]=c[e].concat(r[e]))}),r.thirdparty_url&&o.shim(r.thirdparty_url).forEach(function(e){o.shim(c).keys().forEach(function(t){"string"==typeof e[t]?c[t].push(e[t]):"[object Array]"===Object.prototype.toString.call(e[t])&&(c[t]=c[t].concat(e[t]))})}),e.admLog=c;var s=arguments.callee,l=setTimeout(function(){++i<t.length&&s(t[i])},1e3*(r.timeout||8));if("img"===r.type){var u=new Image,f=a.createElement("a");u.onload=function(){o.log(c.show),clearTimeout(l)},u.src=r.big_img,f.href=r.url,f.target="_blank",f.onclick=function(){o.log(c.click)},f.appendChild(u),"sync"===n?e.parentNode.insertBefore(f,e):e.appendChild(f)}else if("text"===r.type){var f=a.createElement("a");f.href=r.url,f.title=r.title,f.onclick=function(){o.log(c.click)},f.target="_blank",f.innerHTML=r.title,"sync"===n?e.parentNode.insertBefore(f,e):e.appendChild(f),o.log(c.show),clearTimeout(l)}else if("flash"===r.type);else if("html"===r.type){r.rawHtml?r.html=r.rawHtml:r.rawHtml=r.html,e.id||(e.id="video_adm_cont_"+o.getRandom());var d=o.jsonStringify({id:e.id,show:c.show,click:c.click});if(r.html=r.html.replace(/\$\{(AUCTION_CLICK_URL_UNESC|AUCTION_CLICK_URL_ESC)\}/g,""),r.html=r.html.replace(/BAIDU_VIDEO_ADM_FRAME_WRAP\(([^\{]+)?\{/,"BAIDU_VIDEO_ADM_FRAME_WRAP("+d+", {"),r.html=r.html.replace(/BAIDU_VIDEO_ADM_SPRITE\(([^\{]+)?\{/,"BAIDU_VIDEO_ADM_SPRITE("+d+", {"),r.html=r.html.replace('<script type="text/adm-tpl">','<script type="text/adm-tpl" id="admtpl_'+e.id+'">'),"sync"===n)a.write(r.html);else{e.innerHTML="."+r.html,e.removeChild(e.firstChild);var p=e.getElementsByTagName("script");o.shim(p,"array").forEach(function(e){"ie"===o.broswser.name&&o.broswser.version<9&&e.defer||e.getAttribute("type")&&"text/javascript"!==e.getAttribute("type")||o.globalEval(e.innerHTML)})}clearTimeout(l)}}var i=0;r(t[i])}function r(e,t){var r=e.elem;if("string"==typeof e.elem&&(r=a.getElementById(e.elem)),r){var o=e.ad[0].data;o&&o[0]&&o[0].type&&(r.innerHTML="",n(r,o,t),e.afterRender&&"function"==typeof e.afterRender&&e.afterRender(r))}}if(!e.BAIDU_VIDEO_ADM_FILL){var o=__usebyinline__=function(){function t(e,t){"object"==typeof e&&(t=e,e=t.constructor||function(){}),delete t.constructor;var n={},r=function(){e.apply(this,arguments)};for(var o in e.prototype)e.prototype.hasOwnProperty(o)&&(n[o]=e.prototype[o]);for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);return n.constructor=e.prototype.constructor,r.prototype=n,r}function n(e,t){return Object.prototype.hasOwnProperty.call(e,"shimed")?e:(t=t||Object.prototype.toString.call(e).match(/^\[object ([a-zA-Z]+)\]$/)[1],new(o[t.toLowerCase()])(e))}var r={},o={},a=e.document;return o.array=o.htmlcollection=o.nodelist=t({constructor:function(e){this.value=e,this.shimed=!0},forEach:function(e){for(var t,n=0;n<this.value.length&&(t=e(this.value[n]),"break"!=t);n++);return this},map:function(e){for(var t=0;t<this.value.length;t++)this.value[t]=e(this.value[t]);return this},indexOf:function(){},filter:function(){}}),o.object=t({constructor:function(e){this.value=e,this.shimed=!0},assign:function(){if(arguments.length)for(var e=0;e<arguments.length;e++)if("object"==typeof arguments[e])for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(this.value[t]=arguments[e][t]);return this},keys:function(){var e=[];for(var t in this.value)this.value.hasOwnProperty(t)&&e.push(t);return new o.array(e)},has:function(){}}),r.shim=n,r.jsonToQuery=function(e){var t=n(e).keys().map(function(t){return t+"="+e[t]});return t.value.join("&")},r.queryToJson=function(e){var t={},r=e.split("&");return n(r).forEach(function(e){if(e){var n=e.split("=");n[0]&&n[1]&&(t[n[0]]=n[1])}}),t},r.jsonParse=function(t){if(e.JSON&&e.JSON.parse)try{return e.JSON.parse(t+"")}catch(n){throw n}else Function("return "+t)()},r.jsonStringify=function(t){if(e.JSON&&e.JSON.stringify)try{return e.JSON.stringify(t)}catch(n){throw n}if("[object Array]"===Object.prototype.toString.call(t)){for(var o=[],a=0;a<t.length;a++)o.push(r.jsonStringify(t[a]));return"["+o.join(",")+"]"}if("[object Object]"===Object.prototype.toString.call(t)){var o=[];for(var i in t)t.hasOwnProperty(i)&&o.push('"'+i+'":'+r.jsonStringify(t[i]));return"{"+o.join(",")+"}"}return"[object Function]"===Object.prototype.toString.call(t)||"[object Null]"===Object.prototype.toString.call(t)?"null":"[object Number]"===Object.prototype.toString.call(t)?t.toString():'"'+t.toString()+'"'},r.getRandom=function(){return Math.floor(2147483648*Math.random()).toString(32)},r.jsonParse=function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t+""):void Function("return "+t)()},r.trim=function(e){return e?(e+="",e=e.replace(/^(\s+)?/g,""),e=e.replace(/((?:.+)(?:\S))?(\s+)$/g,"$1")):""},r.globalEval=function(t){t&&r.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},r.sendlog=function(t){var n=new Image,o="video_ajax_log_"+r.getRandom();e[o]=n,n.onload=n.onerror=n.onabort=function(){try{delete e[o]}catch(t){e[o]=void 0}n=null},t+=t.indexOf("?")>-1?"&":"?",t+=".stamp="+Math.random(),n.src=t},r.log=function(e){return e?"string"==typeof e?r.sendlog(e):void n(e).forEach(function(e){r.sendlog(e)}):void 0},r.broswser=new(t({constructor:function(){this.ua=e.navigator.userAgent,this.re=e.RegExp,this.name="",this.os="",this.version="",this.regs={ieLow:/(?:ms|\()(ie)\s([\w\.]+)/i,ieHig:/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i,webkit:/(webkit)\/([\w\.]+)/i,gecko:/rv\:([\w\.]+).*(gecko)/i,presto:/(presto)\/([\w\.]+)/i,mac:/(macintosh|mac(?=_powerpc)\s)/i,ios:/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i,android:/(android)[\/\s-]?([\w\.]+)*/i},this.checkBrowser()},checkBrowser:function(){var e=this;n(["ieLow","ieHig","webkit","gecko","presto"]).forEach(function(t){return e.regs[t].test(e.ua)?(e.name=e.re.$1.toLowerCase(),"ieHig"===t&&(e.name="ie"),e.version=e.re.$2,"break"):void 0}),n(["mac","ios","android"]).forEach(function(t){return e.regs[t].test(e.ua)?(e.os=t,"break"):void 0})}})),r.cookie={isValidKey:function(e){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)},getRaw:function(e){if(r.cookie.isValidKey(e)){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),n=t.exec(a.cookie);if(n)return n[2]||null}return null},get:function(e){var t=r.cookie.getRaw(e);return"string"==typeof t?t=decodeURIComponent(t):null},setRaw:function(e,t,n){if(r.cookie.isValidKey(e)){n=n||{};var o=n.expires;"number"==typeof n.expires&&(o=new Date,o.setTime(o.getTime()+n.expires)),a.cookie=e+"="+t+(n.path?"; path="+n.path:"")+(o?"; expires="+o.toGMTString():"")+(n.domain?"; domain="+n.domain:"")+(n.secure?"; secure":"")}},remove:function(e,t){t=t||{},t.expires=new Date(0),r.cookie.setRaw(e,"",t)},set:function(e,t,n){r.cookie.setRaw(e,encodeURIComponent(t),n)}},r.event={isSupportTouch:!!("ontouchstart"in e),touchMap:{mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend",touchcancel:"touchcancel",click:"touchstart"},on:function(t,o,a,i){"function"==typeof a&&(i=a,a="");var c=function(o){if(o.type in r.event.touchMap){if((new Date).getTime()-c.timespan<50)return;c.timespan=(new Date).getTime()}var o=o||e.event;if(o.preventDefault||(o.preventDefault=function(){o.returnValue=!1}),o.stopPropagation||(o.stopPropagation=function(){o.cancelBubble=!0}),o.srcElement&&(o.target=o.srcElement),o.touches&&o.touches[0]&&(o.pageX=o.touches[0].pageX,o.pageY=o.touches[0].pageY),a){var s=r.query(t,a),l=!1;if(n(s,"array").forEach(function(e){return e&&e.contains&&e.contains(o.target)||e===o.target?(l=!0,"break"):void 0}),!l)return}i(o)};c.timespan=(new Date).getTime(),i.callee=c,t.addEventListener?(t.addEventListener(o,c,!1),r.event.isSupportTouch&&r.event.touchMap[o]&&"click"!==o&&t.addEventListener(r.event.touchMap[o],c,!1)):t.attachEvent&&t.attachEvent("on"+o,c)},off:function(e,t,n){n.callee||(n.callee=n),e.addEventListener?(e.removeEventListener(t,n.callee,!1),r.event.isSupportTouch&&r.event.touchMap[t]&&e.removeEventListener(r.event.touchMap[t],n.callee,!1)):e.attachEvent&&e.detachEvent("on"+t,n.callee)},trigger:function(e,t){var n;if(document.createEvent)n=document.createEvent("Events"),n.initEvent(t,!0,!0);else{if(!document.createEventObject)return;n=document.createEventObject()}n.target=e,e.dispatchEvent?e.dispatchEvent(n):e.fireEvent&&e.fireEvent(t,n)}},r.className={has:function(e,t){var n=" "+e.className+" ",r=new RegExp("\\s"+t+"\\s");return r.test(n)?!0:!1},add:function(e,t){e.length&&e.length>0?n(e).forEach(function(e){r.className.has(e,t)||(e.className=r.trim(e.className+" "+t))}):r.className.has(e,t)||(e.className=r.trim(e.className+" "+t))},remove:function(e,t){var o=new RegExp("\\s"+t+"\\s","g");if(e.length&&e.length>0)n(e).forEach(function(e){var t=" "+e.className+" ";o.test(t)&&(t=r.trim(t.replace(o," ")),e.className=t.replace(/\s+/g," "))});else{var a=" "+e.className+" ";o.test(a)&&(a=r.trim(a.replace(o," ")),e.className=a.replace(/\s+/g," "))}}},r.query=function(e,t){function n(e,t,o){var a=o[t],i=e.children;if(i&&i.length)for(var c=0;c<i.length;c++){var s=i[c],l=a.match(/\.(\S+)/),u=a.match(/\#(\S+)/),f=a.match(/\[(.+)\]/),d=!1;if(l){var p=" "+s.className+" ",m=new RegExp("\\s"+l[1]+"\\s");m.test(p)&&(d=!0)}else if(u)s.id&&s.id.toUpperCase()===a.toUpperCase()&&(d=!0);else if(f){var h=f[1].split("="),v=h[0],g=h[1]||"";s.getAttribute(v)===g&&(d=!0)}else s.tagName&&s.tagName.toUpperCase()===a.toUpperCase()&&(d=!0);d?o[t+1]?n(s,t+1,o):r.push(s):n(s,t,o)}}var r=[];if("string"==typeof e)t=e.toString(),e=a.body;else if(!t||"string"!=typeof t)return e;if(e.querySelectorAll)return e.querySelectorAll(t);t=t.replace(/\s+/g," ");var o=t.split(" ");if(e===a.body){var i=o[0].match(/\#(\S+)/);i&&(e=a.getElementById(i[1]),o.shift(),e&&!o.length&&r.push(e))}return o.length&&n(e,0,o),r},r.proxy=function(e,t){return function(){e.apply(t,arguments)}},r.ajax=function(t){t=n({type:"GET",data:{},callbackname:"",charset:"utf-8",dataType:"json",success:function(){},error:function(){}}).assign(t).value;var o=t.callbackname||"video_ajax_callback_"+r.getRandom(),i=a.createElement("script"),c=a.getElementsByTagName("head")[0]||a.body;e[o]=function(n){t.success(n),e[o]=null},i.onload=function(){i.parentNode.removeChild(i)},i.charset=t.charset,i.async=!1,i.src=t.url+(-1===t.url.indexOf("?")?"?":"&")+r.jsonToQuery(n({}).assign(t.data,{callback:o}).value),c.insertBefore(i,c.firstChild)},r.ready=function(){var t,n=!1,o=[],i=0,c=function(){if(i++,a.readyState&&"complete"===a.readyState&&(n=!0),"ie"===r.broswser.name&&r.broswser.version<9)try{a.documentElement.doScroll("left"),n=!0}catch(e){}if(n)for(clearInterval(t);o.length;){var c=o.splice(0,1);c[0]()}i>5e3&&clearInterval(t)};return t=setInterval(c,50),r.event.on(a,"DOMContentLoaded",function(){n=!0,c()}),r.event.on(e,"load",function(){n=!0,c()}),function(e){"function"==typeof e&&(n?e():o.push(e))}}(),r.swf={embed:function(e){var t=e.wrap;if(e.wrap&&"string"==typeof e.wrap)var t=r.query(e.wrap)[0];e.vars&&"object"==typeof e.vars&&(e.vars=r.jsonToQuery(e.vars)),e.movie=e.url,e.data=e.url,e.flashvars=e.vars;var o=n({align:"middle",classid:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",codebase:"http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0",wmode:"transparent",allowscriptaccess:"never",type:"application/x-shockwave-flash",width:"100%",height:"100%",allowfullscreen:!0}).assign(e).value,a='<div class="no-flash-tips">您的flash可能被禁用或版本过低,为了能够正常观看视频，请您<a href="http://get.adobe.com/cn/flashplayer/?no_redirect" target="_blank" class="a-flash-link">点此下载最新版本</a></div>',i="<object";"ie"===r.broswser.name&&r.broswser.version<11?(n(["classid","codebase","id","width","height","align"]).forEach(function(e){o[e]&&(i+=" "+e+"="+o[e])}),i+=">",n(["movie","flashvars","wmode","allowscriptaccess","allowfullscreen","scale","salign"]).forEach(function(e){o[e]&&(i+=" <param name="+e+" value="+o[e]+" />")}),i+=a+"</object>"):(n(["id","width","height","align","data","type"]).forEach(function(e){o[e]&&(i+=" "+e+"="+o[e])}),i+=">",n(["flashvars","wmode","allowscriptaccess","allowfullscreen","scale","salign"]).forEach(function(e){o[e]&&(i+=" <param name="+e+" value="+o[e]+" />")}),i+=a+"</object>"),t.innerHTML=i},exec:function(e,t){var n=a.getElementById(e);if(n&&"OBJECT"===n.nodeName){var r=arguments;n[t]?n[t].apply(n,Array.prototype.slice.call(r,2)):setTimeout(function(){r.callee.apply(null,r)},200)}},remove:function(e){var t=a.getElementById(e);t&&"OBJECT"===t.nodeName&&("ie"===r.broswser.name&&r.broswser.version<11?(t.style.display="none",function(){if(4===t.readyState){for(var e in t)"function"==typeof t[e]&&(t[e]=null);t.parentNode.removeChild(t)}else setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))},support:function(){var e=!1;try{e=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(t){e="undefined"!=typeof navigator.mimeTypes["application/x-shockwave-flash"]}return e}()},r.tmpl=function(){var e={};return function t(n,r){var o=/\W/.test(n)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):e[n]=e[n]||t(document.getElementById(n).innerHTML);return r?o(r):o}}(),r}(),a=e.document,i={},c={},s=!1,l="//app.video.baidu.com/adver";if(e.location.search&&-1!==e.location.search.indexOf("adm_debug")){var u=o.queryToJson(e.location.search.substring(1));s=!0,l=u.ad_host}return i.fill=function(t,n){var i="video_adm_cont_"+o.getRandom();if(n=n||function(){},c[t])c[t].pos.push({elem:i,afterRender:n}),c[t].ad&&r({ad:c[t].ad,elem:i,afterRender:n},"sync");else{c[t]={ad:"",pos:[{elem:i,afterRender:n}]},e.video_adm_callback=function(e){if(e.data[t]&&(c[t].ad=e.data[t]),c[t].ad){var n=c[t].ad[0].data[0].request;"string"==typeof n&&(n=[n]),o.log(n),o.shim(c[t].pos).forEach(function(e){r({ad:c[t].ad,elem:e.elem,afterRender:e.afterRender})},"sync")}};var s=l+"?callback=video_adm_callback&terminal=pc&position="+t+"&"+o.jsonToQuery({site:encodeURIComponent(document.location.href),refer:encodeURIComponent(document.referrer)});a.write('<div id="'+i+'"></div><script src="'+s+'"></'),a.write("script>")}},i.fill_asyc=function(e,t,n){n=n||function(){},c[e]?(c[e].pos.push({elem:t,afterRender:n}),c[e].ad&&r({ad:c[e].ad,elem:t,afterRender:n})):(c[e]={ad:"",pos:[{elem:t,afterRender:n}]},o.ajax({url:l+"?terminal=pc&position="+e,data:{id:e,site:encodeURIComponent(document.location.href),refer:encodeURIComponent(document.referrer)},success:function(t){if(0!==t.errno)return void o.sendlog();if(t.data[e]&&(c[e].ad=t.data[e]),c[e].ad){var n=c[e].ad[0].data[0].request;"string"==typeof n&&(n=[n]),o.log(n),o.shim(c[e].pos).forEach(function(t){r({ad:c[e].ad,elem:t.elem,afterRender:t.afterRender})})}}}))},i.frame_wrap=function(e,t){"string"==typeof e&&(e={id:e,show:[]});var n=document.getElementById(e.id);if(n){var r="adframe_wrap_"+Math.floor(2147483648*Math.random()).toString(32);n.innerHTML='<iframe id="'+r+'" src="about:blank" width="'+t.width+'" height="'+t.height+'" style="margin:0 auto 0" allowTransparency="true" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border:0px;"></iframe>';var a=document.getElementById(r),i=a.contentWindow.document;i.open(),i.write('<!DOCTYPE html><head><meta charset="utf-8"></head><body><style>html,body{padding:0;margin:0; width:100%; height:100%}</style>'+t.html+"<script>~function(){            if(typeof window.parent.BAIDU_VIDEO_ADM_TOOLS == 'undefined') return;            var lib = window.parent.BAIDU_VIDEO_ADM_TOOLS;            lib.log("+o.jsonStringify(e.show)+");        }()</script></body></html>"),"ie"!==o.broswser.name&&i.close()}},i.sprite=function(e,t){if(t.__lib=o,t.__tplNode="",!t.filter||"function"!=typeof t.filter||t.filter.call(t)!==!1){var n=a.createElement("div"),r=a.getElementById("admtpl_"+e.id);r&&(n.innerHTML=o.tmpl(r.innerHTML,t.tplData||{}),t.__tplNode=n),t.__wrap=o.query("#"+e.id)[0],t.render&&"function"==typeof t.render&&(t.render.call(t),o.log(e.show));var i=n.innerHTML.match(/adm-on-\w+=".+?"/g);if(i)for(var c=0;c<i.length;c++){var s=i[c].match(/adm-on-(\w+)="(.+?)"/);s&&3===s.length&&"function"==typeof t[s[2]]&&o.event.on(n,s[1],"["+i[c]+"]",o.proxy(t[s[2]],t))}o.event.on(n,"click","[adm-click]",function(){o.log(e.click)})}},i.tools=o,"undefined"==typeof t&&o.shim(i).keys().forEach(function(t){e["BAIDU_VIDEO_ADM_"+t.toUpperCase()]=i[t]}),e.__currentIsDevelopMode__&&(e.utils=o),setInterval(function(){var e=document.documentElement.clientHeight,t=document.documentElement.clientWidth;for(var n in c)c[n].pos&&o.shim(c[n].pos).forEach(function(n){var r=n.elem;if("string"==typeof r&&(r=a.getElementById(r)),r&&!(r.admLogCount&&r.admLogCount>1)){var i=r.getBoundingClientRect();(i.top>=0&&e-i.top>=i.height/2||i.top<0&&Math.abs(i.top)<=i.height/2)&&(i.left>=0&&t-i.left>=i.width/2||i.left<0&&Math.abs(i.left)<=i.width/2)&&r.admLog&&(r.admLogCount?(r.admLogCount++,2===r.admLogCount&&o.log(r.admLog.vshow)):r.admLogCount=1)}})},1e3),i}});